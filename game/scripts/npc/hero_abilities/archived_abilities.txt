"DOTAAbilities"
{
  //=================================================================================================================
  // Infinity Darkemist: Cry of Infinity (Q) - New Spell, AoE Spell; Damages All (except buildings), Reduces Attack Damage of Enemies
  // Author: Darkonius
  // Notes: OK; 11.2.2016;
  // TO_DO:
  //=================================================================================================================
  "infinity_darkemist_cry_of_infinity"
  {
    // General
    //-------------------------------------------------------------------------------------------------------------
    "BaseClass"                                           "ability_datadriven"
    "AbilityBehavior"                                     "DOTA_ABILITY_BEHAVIOR_NO_TARGET"
    "AbilityTextureName"                                  "dark_cry_of_infinity"
    "AbilityUnitTargetTeam"                               "DOTA_UNIT_TARGET_TEAM_BOTH"
    "AbilityUnitTargetType"                               "DOTA_UNIT_TARGET_ALL"
    "AbilityUnitDamageType"                               "DAMAGE_TYPE_PHYSICAL"
    "SpellImmunityType"                                   "SPELL_IMMUNITY_ENEMIES_YES"
    
    "AbilityCastPoint"                                    "0.1"
    "AbilityCastAnimation"                                "ACT_DOTA_ATTACK"
    "AnimationPlaybackRate"                               "1"
    "AnimationIgnoresModelScale"                          "1"

    // Stats
    //----------------------------------------------------------------------------------------
    "AbilityManaCost"                                     "30 40 50 60"
    "AbilityCooldown"                                     "7.0 6.0 5.0 4.0"
    "AbilityProcsMagicStick"                              "1"
    
    "precache" 
    {
      "particle"                                          "particles/custom/vengeful_wave_of_terror_recipient_reduction.vpcf"
      "soundfile"                                         "soundevents/game_sounds_heroes/game_sounds_silencer.vsndevts"
    }
    
    "AbilitySpecial"
    {
      "01"
      {
        "var_type"                                        "FIELD_INTEGER"
        "radius"                                          "375"
      }          

      "02"
      { 
        "var_type"                                        "FIELD_INTEGER"
        "damage"                                          "75 125 175 225"
      }
      "03"
      { 
        "var_type"                                        "FIELD_INTEGER"
        "damage_reduction"                                "-45 -50 -55 -60"
      }
      "04"
      {
        "var_type"                                        "FIELD_FLOAT"
        "duration"                                        "6.0"
      }
      
    }
    
    "OnSpellStart"
    {
      "FireSound"
      {
        "EffectName"                                      "Hero_Silencer.Curse.Impact"
        "Target"                                          "CASTER"
      }
      
      "Damage"
      {
        "Type"                                            "DAMAGE_TYPE_PHYSICAL"
        "Damage"                                          "%damage"
        "Target"
        {
          "Center"                                        "CASTER"
          "Radius"                                        "%radius"
          "Teams"                                         "DOTA_UNIT_TARGET_TEAM_BOTH"
          "Types"                                         "DOTA_UNIT_TARGET_HERO | DOTA_UNIT_TARGET_CREEP | DOTA_UNIT_TARGET_MECHANICAL | DOTA_UNIT_TARGET_OTHER"
          "Flags"                                         "DOTA_UNIT_TARGET_FLAG_MAGIC_IMMUNE_ENEMIES"
        }
      }

      "ApplyModifier"
      {
        "ModifierName"                                    "modifier_infinity_debuff"
        "Target"
        {
          "Center"                                        "CASTER"
          "Radius"                                        "%radius"
          "Teams"                                         "DOTA_UNIT_TARGET_TEAM_ENEMY"
          "Types"                                         "DOTA_UNIT_TARGET_HERO | DOTA_UNIT_TARGET_CREEP | DOTA_UNIT_TARGET_MECHANICAL | DOTA_UNIT_TARGET_OTHER"
          "Flags"                                         "DOTA_UNIT_TARGET_FLAG_MAGIC_IMMUNE_ENEMIES"
        }
      }
    }
    
    "Modifiers"
    {
      "modifier_infinity_debuff"  // needs tooltip
      {
        "IsHidden"                                        "0"
        "IsDebuff"                                        "1"
        "IsPurgable"                                      "1"
        
        "Duration"                                        "%duration"

        "OnCreated"
        {
          "AttachEffect"
          {
            "Target"
            {
              "Center"                                    "TARGET"
              "Flags"                                     "DOTA_UNIT_TARGET_FLAG_MAGIC_IMMUNE_ENEMIES"
            }
            "EffectName"                                  "particles/custom/vengeful_wave_of_terror_recipient_reduction.vpcf"
            "EffectAttachType"                            "follow_overhead"
            "EffectLifeDurationScale"                     "1"
            "EffectColorA"                                "25 150 0"
            "EffectAlphaScale"                            "1"
          }
        }

        "Properties"
        {
          "MODIFIER_PROPERTY_DAMAGEOUTGOING_PERCENTAGE"   "%damage_reduction"
        }
      }
    }
  }
  
  //=================================================================================================================
  // Infinity Darkemist: Dark Transmutation (T) - New Spell, Summons 2 creatures
  // Author: Darkonius
  // Notes: OK; 11.2.2016;
  // TO_DO: ADD ABILITY TO SKELETON WARRIORS;
  //=================================================================================================================
  "infinity_darkemist_dark_transmutation"
  {
    //General
    //-------------------------------------------------------------------------------------------------------------
    "BaseClass"                                           "ability_datadriven"
    "AbilityBehavior"                                     "DOTA_ABILITY_BEHAVIOR_NO_TARGET"
    "AbilityTextureName"                                  "dark_transmutation"
    
    // Casting
    //-------------------------------------------------------------------------------------------------------------
    "AbilityCastPoint"                                    "0.3"

    // Time    
    //-------------------------------------------------------------------------------------------------------------
    "AbilityCooldown"                                     "40.0 40.0 35.0 30.0"

    // Cost
    //-------------------------------------------------------------------------------------------------------------
    "AbilityManaCost"                                     "150 125 100 75"
    "AbilityProcsMagicStick"                              "1"

    // Special
    //-------------------------------------------------------------------------------------------------------------
    "AbilitySpecial"
    {
      "01"
      {
        "var_type"                                        "FIELD_INTEGER"
        "summoned_hp_tooltip"                             "200 250 350 450"
      }
      "02"
      {
        "var_type"                                        "FIELD_INTEGER"
        "summoned_damage_tooltip"                         "25 28 40 55"
      }
      "03"
      {
        "var_type"                                        "FIELD_INTEGER"
        "summoned_duration"                               "40 40 60 60"
      }    
      "04"
      {
        "var_type"                                        "FIELD_INTEGER"
        "skeleton_warrior_count"                          "2 0 0 0"
      }
      "05"
      {
        "var_type"                                        "FIELD_INTEGER"
        "zombie_warrior_count"                            "0 2 0 0"
      }
      "06"
      {
        "var_type"                                        "FIELD_INTEGER"
        "destroyer_count"                                 "0 0 1 0"
      }
      "07"
      {
        "var_type"                                        "FIELD_INTEGER"
        "lich_warrior_count"                              "0 0 0 1"
      }
    }

    "precache"
    {
      "particle"                                          "particles/units/heroes/hero_beastmaster/beastmaster_call_boar.vpcf"
      "particle"                                          "particles/units/heroes/hero_lich/lich_base_attack.vpcf"
      "soundfile"                                         "soundevents/game_sounds_heroes/game_sounds_undying.vsndevts"
      "soundfile"                                         "soundevents/game_sounds_heroes/game_sounds_lich.vsndevts"
      "model"                                             "models/creeps/neutral_creeps/n_creep_troll_skeleton/n_creep_skeleton_melee.vmdl"
      "model"                                             "models/heroes/undying/undying_minion.vmdl"
      "model"                                             "models/heroes/obsidian_destroyer/obsidian_destroyer.vmdl"
      "model"                                             "models/heroes/lich/lich.vmdl"
    }

    "OnSpellStart"
    {
      "SpawnUnit"
      {
        "UnitName"                                        "npc_dota_dark_skeleton_warrior"
        "Target"
        {
          "Center"                                        "CASTER"
        }

        "UnitCount"                                       "%skeleton_warrior_count"
        "Duration"                                        "%summoned_duration"

        "GrantsGold"                                      "1"
        "GrantsXP"                                        "1"

        "OnSpawn"
        {
          "ApplyModifier"
          {
            "ModifierName"                                "modifier_transmutation_phased"
            "Target"                                      "TARGET"
            "Duration"                                    "1"
          }

        }
      }

      "SpawnUnit"
      {
        "UnitName"                                        "npc_dota_dark_zombie_warrior"
        "Target"
        {
          "Center"                                        "CASTER"
        }

        "UnitCount"                                       "%zombie_warrior_count"
        "Duration"                                        "%summoned_duration"

        "GrantsGold"                                      "1"
        "GrantsXP"                                        "1"

        "OnSpawn"
        {
          "ApplyModifier"
          {
            "ModifierName"                                "modifier_transmutation_phased"
            "Target"                                      "TARGET"
            "Duration"                                    "1"
          }

        }
      }

      "SpawnUnit"
      {
        "UnitName"                                        "npc_dota_dark_destroyer"
        "Target"
        {
          "Center"                                        "CASTER"
        }

        "UnitCount"                                       "%destroyer_count"
        "Duration"                                        "%summoned_duration"

        "GrantsGold"                                      "1"
        "GrantsXP"                                        "1"

        "OnSpawn"
        {
          "ApplyModifier"
          {
            "ModifierName"                                "modifier_transmutation_phased"
            "Target"                                      "TARGET"
            "Duration"                                    "1"
          }

        }
      }

      "SpawnUnit"
      {
        "UnitName"                                        "npc_dota_dark_lich_warrior"
        "Target"
        {
          "Center"                                        "CASTER"
        }

        "UnitCount"                                       "%lich_warrior_count"
        "Duration"                                        "%summoned_duration"

        "GrantsGold"                                      "1"
        "GrantsXP"                                        "1"

        "OnSpawn"
        {
          "ApplyModifier"
          {
            "ModifierName"                                "modifier_transmutation_phased"
            "Target"                                      "TARGET"
            "Duration"                                    "1"
          }

        }
      }
    }

    "Modifiers"
    {
      "modifier_transmutation_phased"
      {
        "IsHidden"                                        "1"
        "IsPurgable"                                      "0"

        "OnCreated"
        {
          "FireEffect"
          {
            "Target"                                      "TARGET"
            "EffectName"                                  "particles/units/heroes/hero_beastmaster/beastmaster_call_boar.vpcf"
            "EffectAttachType"                            "follow_origin"
          }
        }
        
        "States"
        {
          "MODIFIER_STATE_NO_UNIT_COLLISION"              "MODIFIER_STATE_VALUE_ENABLED"
        }
      }
    }
  }
  
  //=================================================================================================================
  // Dark Transmutation : Zombie Warrior Death Lust - Passive Melee Slow;
  // Author: Darkonius
  // Notes: OK; Zombie Warrior ability; 11.2.2016;
  // TO_DO:
  //=================================================================================================================
  "dark_transmutation_warrior_death_lust"
  {
    "BaseClass"                                           "ability_datadriven"
    "AbilityBehavior"                                     "DOTA_ABILITY_BEHAVIOR_PASSIVE"
    "AbilityUnitTargetTeam"                               "DOTA_UNIT_TARGET_TEAM_ENEMY"
    "AbilityUnitTargetType"                               "DOTA_UNIT_TARGET_BASIC | DOTA_UNIT_TARGET_HERO"
    "SpellImmunityType"                                   "SPELL_IMMUNITY_ENEMIES_NO"
    "AbilityTextureName"                                  "undying_tombstone_zombie_deathstrike"
    "MaxLevel"                                            "1"
    
    "AbilitySpecial"
    {
      "01"
      {
        "var_type"                                        "FIELD_FLOAT"
        "creep_duration"                                  "2.0"
      }
      "02"
      {
        "var_type"                                        "FIELD_FLOAT"
        "hero_duration"                                   "1.5"
      }
      "03"
      {
        "var_type"                                        "FIELD_INTEGER"
        "move_speed_slow"                                 "-5"
      }
      "04"
      {
        "var_type"                                        "FIELD_INTEGER"
        "attack_speed_slow"                               "-5"
      }
      "05"
      {
        "var_type"                                        "FIELD_INTEGER"
        "attack_speed_bonus"                              "50"
      }
      "06"
      {
        "var_type"                                        "FIELD_FLOAT"
        "buff_duration"                                   "2.0"
      }
    }
    
    "Modifiers"
    {
      "modifier_dark_transmutation_warrior_death_lust_passive"  // doesn't need tooltip
      {
        "Passive"                                         "1"
        "IsHidden"                                        "1"
        "IsBuff"                                          "1"
        "IsPurgable"                                      "0"
        
        "OnAttackLanded"
        {
          "ApplyModifier"
          {
            "ModifierName"                                "modifier_dark_transmutation_warrior_death_lust_slow"
            "Target"
            {
              "Center"                                    "TARGET"
              "Teams"                                     "DOTA_UNIT_TARGET_TEAM_ENEMY"
              "Types"                                     "DOTA_UNIT_TARGET_HERO"
            }
            "Duration"                                    "%hero_duration"
          }
          
          "ApplyModifier"
          {
            "ModifierName"                                "modifier_dark_transmutation_warrior_death_lust_slow"
            "Target"
            {
              "Center"                                    "TARGET"
              "Teams"                                     "DOTA_UNIT_TARGET_TEAM_ENEMY"
              "Types"                                     "DOTA_UNIT_TARGET_BASIC"
            }
            "Duration"                                    "%creep_duration"
          }
          
          "ApplyModifier"
          {
            "Target"                                      "CASTER"
            "ModifierName"                                "modifier_dark_transmutation_warrior_death_lust_buff"
            "Duration"                                    "%buff_duration"
          }  
        }
      }

      "modifier_dark_transmutation_warrior_death_lust_slow"  // needs tooltip
      {
        "IsHidden"                                        "0"
        "IsDebuff"                                        "1"
        "IsPurgable"                                      "1"
        
        "EffectName"                                      "particles/neutral_fx/gnoll_poison_debuff.vpcf"
        "EffectAttachType"                                "attach_hitloc"
        
        "Attributes"                                      "MODIFIER_ATTRIBUTE_MULTIPLE"

        "Properties"
        {
          "MODIFIER_PROPERTY_MOVESPEED_BONUS_PERCENTAGE"  "%move_speed_slow"
          "MODIFIER_PROPERTY_ATTACKSPEED_BONUS_CONSTANT"  "%attack_speed_slow"
        }
      }
      
      "modifier_dark_transmutation_warrior_death_lust_buff"  // needs tooltip
      {
        "IsHidden"                                        "0"
        "IsBuff"                                          "1"
        "IsPurgable"                                      "0"
        
        "EffectName"                                      "particles/items2_fx/mask_of_madness.vpcf"
        
        "Properties"
        {
          "MODIFIER_PROPERTY_ATTACKSPEED_BONUS_CONSTANT"  "%attack_speed_bonus"
        }
      }
    }
  }
  
  //=================================================================================================================
  // Dark Transmutation : Headless Destroyer Poison - Passive Range Slow like Beastmaster's Boar Slow level 3
  // Author: Darkonius
  // Notes: OK; Headless Destroyer ability; 11.2.2016;
  // TO_DO:
  //=================================================================================================================
  "dark_transmutation_warrior_poison"
  {
    "BaseClass"                                           "ability_datadriven"
    "AbilityBehavior"                                     "DOTA_ABILITY_BEHAVIOR_PASSIVE"
    "AbilityUnitTargetTeam"                               "DOTA_UNIT_TARGET_TEAM_ENEMY"
    "AbilityUnitTargetType"                               "DOTA_UNIT_TARGET_BASIC | DOTA_UNIT_TARGET_HERO"
    "SpellImmunityType"                                   "SPELL_IMMUNITY_ENEMIES_NO"
    "AbilityTextureName"                                  "dark_transmutation_warrior_poison"
    "MaxLevel"                                            "1"
    
    "AbilitySpecial"
    {
      "01"
      {
        "var_type"                                        "FIELD_FLOAT"
        "creep_duration"                                  "3.0"
      }
      "02"
      {
        "var_type"                                        "FIELD_FLOAT"
        "hero_duration"                                   "2.0"
      }
      "03"
      {
        "var_type"                                        "FIELD_INTEGER"
        "move_speed_slow"                                 "-30"
      }
      "04"
      {
        "var_type"                                        "FIELD_INTEGER"
        "attack_speed_slow"                               "-30"
      }  
    }

    "Modifiers"
    {
      "modifier_dark_transmutation_warrior_poison_passive"  // doesn't need tooltip
      {
        "Passive"                                         "1"
        "IsHidden"                                        "1"
        "IsBuff"                                          "1"
        "IsPurgable"                                      "0"
        
        "OnAttackLanded"
        {
          "ApplyModifier"
          {
            "ModifierName"                                "modifier_dark_transmutation_warrior_poison_slow"
            "Target"
            {
              "Center"                                    "TARGET"
              "Teams"                                     "DOTA_UNIT_TARGET_TEAM_ENEMY"
              "Types"                                     "DOTA_UNIT_TARGET_HERO"
            }
            "Duration"                                    "%hero_duration"
          }
          
          "ApplyModifier"
          {
            "ModifierName"                                "modifier_dark_transmutation_warrior_poison_slow"
            "Target"
            {
              "Center"                                    "TARGET"
              "Teams"                                     "DOTA_UNIT_TARGET_TEAM_ENEMY"
              "Types"                                     "DOTA_UNIT_TARGET_BASIC"
            }
            "Duration"                                    "%creep_duration"
          }
        }
      }

      "modifier_dark_transmutation_warrior_poison_slow"  // needs tooltip
      {
        "IsHidden"                                        "0"
        "IsDebuff"                                        "1"
        "IsPurgable"                                      "1"
        
        "EffectName"                                      "particles/neutral_fx/gnoll_poison_debuff.vpcf"
        "EffectAttachType"                                "attach_hitloc"

        "Properties"
        {
          "MODIFIER_PROPERTY_MOVESPEED_BONUS_PERCENTAGE"  "%move_speed_slow"
          "MODIFIER_PROPERTY_ATTACKSPEED_BONUS_CONSTANT"  "%attack_speed_slow"
        }
      }
    }
  }

  //=================================================================================================================
  // Techies Suicide- Datadriven Techies Suicide without respawn time reduction
  // Author: Darkonius
  // Notes: OK; 11.2.2016;
  // TO_DO:
  //=================================================================================================================
  "techies_suicide_datadriven"
  {
    "BaseClass"                                           "ability_datadriven"
    "AbilityBehavior"                                     "DOTA_ABILITY_BEHAVIOR_UNIT_TARGET | DOTA_ABILITY_BEHAVIOR_POINT"
    "AbilityUnitTargetTeam"                               "DOTA_UNIT_TARGET_TEAM_ENEMY"
    "AbilityUnitTargetType"                               "DOTA_UNIT_TARGET_HERO | DOTA_UNIT_TARGET_BASIC"
    "AbilityUnitDamageType"                               "DAMAGE_TYPE_PHYSICAL"
    "SpellImmunityType"                                   "SPELL_IMMUNITY_ENEMIES_YES"
    "AbilityTextureName"                                  "techies_suicide"

    // Precache
    //-------------------------------------------------------------------------------------------------------------
    "precache"
    {
      "soundfile"                                         "soundevents/game_sounds_heroes/game_sounds_techies.vsndevts"    
      "particle"                                          "particles/units/heroes/hero_techies/techies_suicide_base.vpcf"
    }
    
    // Casting
    //-------------------------------------------------------------------------------------------------------------
    "AbilityCastRange"                                    "128"
    "AbilityCastPoint"                                    "0.0"

    // Time    
    //-------------------------------------------------------------------------------------------------------------
    "AbilityCooldown"                                     "160.0 140.0 120.0 100.0"

    // Cost
    //-------------------------------------------------------------------------------------------------------------
    "AbilityManaCost"                                     "100 125 150 175"
    "AbilityProcsMagicStick"                              "1"

    // Special
    //-------------------------------------------------------------------------------------------------------------
    "AbilitySpecial"
    {
      "01"
      {
        "var_type"                                        "FIELD_INTEGER"
        "small_radius"                                    "200"
      }
      "02"
      {
        "var_type"                                        "FIELD_INTEGER"
        "big_radius"                                      "500"
      }
      "03"
      {
        "var_type"                                        "FIELD_INTEGER"
        "damage"                                          "550 700 850 1150"
      }
      "04"
      {
        "var_type"                                        "FIELD_INTEGER"
        "partial_damage"                                  "260 300 340 380"
      }
      "05"
      {
        "var_type"                                        "FIELD_FLOAT"
        "vision_radius"                                   "500"
      }
      "06"
      {
        "var_type"                                        "FIELD_FLOAT"
        "vision_duration"                                 "2.0"
      }
    }

    "OnSpellStart"
    {
      "FireSound"
      {
        "EffectName"                                      "Hero_Techies.Suicide"
        "Target"                                          "CASTER"
      }

      "FireEffect"
      {
        "EffectName"                                      "particles/units/heroes/hero_techies/techies_suicide_base.vpcf"
        "EffectAttachType"                                "follow_origin"
        "Target"                                          "CASTER"
      }

      "DestroyTrees"
      {
        "Target"                                          "CASTER"
        "Radius"                                          "%big_radius"
      }
      "ActOnTargets"
      {
        "Target"
        {
          "Center"                                        "CASTER"
          "Radius"                                        "%small_radius"
          "Teams"                                         "DOTA_UNIT_TARGET_TEAM_ENEMY"
          "Types"                                         "DOTA_UNIT_TARGET_HERO | DOTA_UNIT_TARGET_BASIC | DOTA_UNIT_TARGET_MECHANICAL"
          "Flags"                                         "DOTA_UNIT_TARGET_FLAG_MAGIC_IMMUNE_ENEMIES"
        }
        "Action"    
        {
          "Damage"
          {
            "Target"
            {
              "Center"                                    "TARGET"
              "Flags"                                     "DOTA_UNIT_TARGET_FLAG_MAGIC_IMMUNE_ENEMIES"
            }
            "Type"                                        "DAMAGE_TYPE_PHYSICAL"
            "Damage"                                      "%damage - %partial_damage" // oduzimanje
          }
        }
      }
      "ActOnTargets"
      {
        "Target"
        {
          "Center"                                        "CASTER"
          "Radius"                                        "%big_radius"
          "Teams"                                         "DOTA_UNIT_TARGET_TEAM_ENEMY"
          "Types"                                         "DOTA_UNIT_TARGET_HERO | DOTA_UNIT_TARGET_BASIC | DOTA_UNIT_TARGET_MECHANICAL"
          "Flags"                                         "DOTA_UNIT_TARGET_FLAG_MAGIC_IMMUNE_ENEMIES"
        }
        "Action"    
        {
          "Damage"
          {
            "Target"
            {
              "Center"                                    "TARGET"
              "Flags"                                     "DOTA_UNIT_TARGET_FLAG_MAGIC_IMMUNE_ENEMIES"
            }
            "Type"                                        "DAMAGE_TYPE_PHYSICAL"
            "Damage"                                      "%partial_damage"
          }
        }
      }
      "DelayedAction"
      {
        "Delay"                                           "0.03"
        "Action"    
        {
          "RunScript"
          {
            "ScriptFile"                                  "heroes/techies/suicide.lua"
            "Function"                                    "Suicide"
          }
        }
      }  
    } // end of OnSpellStart
  }
  
  //=================================================================================================================
  // Gipsy Wisdom (W) - New Spell, Maelstrom passive that works on Illusions + intelligence bonus
  // Author: Darkonius
  // Linkens: Doesn't Block (INTENTIONAL); 
  // Notes: Pseudo Random; Works on invisible units (indirect detection); 11.2.2016;
  // TO_DO:
  //=================================================================================================================
  "gipsy_wisdom"
  {
    "BaseClass"                                           "ability_datadriven"
    "AbilityBehavior"                                     "DOTA_ABILITY_BEHAVIOR_PASSIVE"
    "AbilityType"                                         "DOTA_ABILITY_TYPE_BASIC"
    "AbilityTextureName"                                  "gipsy_wisdom"
    
    "AbilityUnitDamageType"                               "DAMAGE_TYPE_MAGICAL"
    "SpellImmunityType"                                   "SPELL_IMMUNITY_ENEMIES_NO"
    
    "AbilityDamage"                                       "50 70 90 110"
    
    "AbilitySpecial"
    {
      "01"
      {
        "var_type"                                        "FIELD_INTEGER"
        "bonus_int"                                       "12 14 16 18"
      }
      "02"
      {
        "var_type"                                        "FIELD_INTEGER"
        "lightning_chance"                                "15 20 25 30"
      }
      "03"
      {
        "var_type"                                        "FIELD_INTEGER"
        "max_units"                                       "3 4 6 8"
      }
      "04"
      {
        "var_type"                                        "FIELD_INTEGER"
        "radius"                                          "800"
      }
    }
    "precache"
    {
      "particle"                                          "particles/items_fx/chain_lightning.vpcf"
      "soundfile"                                         "soundevents/game_sounds_heroes/game_sounds_zuus.vsndevts"
    }
    "Modifiers"
    {
      "modifier_gipsy_wisdom"
      {
        "Passive"                                         "1"
        "IsHidden"                                        "1"
        "IsPurgable"                                      "0"
        "AllowIllusionDuplicate"                          "1"  // to work on illusions
        
        "Properties"
        { 
          "MODIFIER_PROPERTY_STATS_INTELLECT_BONUS"       "%bonus_int"
        }
        "OnAttackStart"
        {
          // Remove the modifier on each attack start to disable people 
          // from cancelling attacks to get a guaranteed proc.
          "RemoveModifier"
          {
            "ModifierName"                                "modifier_lightning"
            "Target"                                      "CASTER"
          }
          "Random"
          {
            "Chance"                                      "%lightning_chance"
            "PseudoRandom"                                "DOTA_PSEUDO_RANDOM_ITEM_MAELSTROM"
            
            "OnSuccess"
            {
              "ApplyModifier"
              {
                "ModifierName"                            "modifier_lightning"
                "Target"                                  "CASTER"
              }
            }
          }
        }
      }
      "modifier_lightning"
      {
        "IsHidden"                                        "1"
        "OnAttackLanded"
        {
          "RunScript"
          {
            "ScriptFile"                                  "heroes/lightning.lua"
            "Function"                                    "Lightning"
          }
          "RemoveModifier"
          {
            "ModifierName"                                "modifier_lightning"
            "Target"                                      "CASTER" 
          }
        }
      }
    }
  }
  
  //=================================================================================================================
  // Emperor of Srem: Trolling Power (Q) - New Spell, Orb that works like Viper Poison, deals intelligence percent damage and reduces armor like desolator
  // Author: Darkonius
  // Linkens: Doesn't Block (INTENTIONAL)
  // Notes: OK; Annoying to play against; 1.2.2016;
  // TO_DO: Add armor reduction On Attack Start (OnOrbFire).
  //=================================================================================================================
  "emperor_trolling_power"
  {
    // General
    //-------------------------------------------------------------------------------------------------------------
    "BaseClass"                                           "ability_datadriven"
    "AbilityBehavior"                                     "DOTA_ABILITY_BEHAVIOR_UNIT_TARGET | DOTA_ABILITY_BEHAVIOR_AUTOCAST | DOTA_ABILITY_BEHAVIOR_ATTACK"
    "AbilityUnitTargetTeam"                               "DOTA_UNIT_TARGET_TEAM_ENEMY"
    "AbilityUnitTargetType"                               "DOTA_UNIT_TARGET_HERO | DOTA_UNIT_TARGET_BASIC"
    "AbilityUnitDamageType"                               "DAMAGE_TYPE_PURE"
    "SpellImmunityType"                                   "SPELL_IMMUNITY_ENEMIES_NO"
    "AbilityTextureName"                                  "emperor_trolling_power"
    
    // Precache
    //-------------------------------------------------------------------------------------------------------------
    "precache"
    {
      "soundfile"                                         "soundevents/game_sounds_heroes/game_sounds_obsidian_destroyer.vsndevts"
      "soundfile"                                         "soundevents/game_sounds_heroes/game_sounds_viper.vsndevts"
      "particle"                                          "particles/units/heroes/hero_obsidian_destroyer/obsidian_destroyer_arcane_orb.vpcf"
      "particle"                                          "particles/units/heroes/hero_viper/viper_poison_debuff.vpcf"
    }
    
    // Casting
    //-------------------------------------------------------------------------------------------------------------
    "AbilityCastRange"                                    "625"
    "AbilityCastPoint"                                    "0.0"
    
    // Time    
    //-------------------------------------------------------------------------------------------------------------
    "AbilityCooldown"                                     "0.0"
    
    // Cost
    //-------------------------------------------------------------------------------------------------------------
    "AbilityManaCost"                                     "100"
    
    // Special
    //-------------------------------------------------------------------------------------------------------------
    "AbilitySpecial"
    {
      "01"
      {
        "var_type"                                        "FIELD_FLOAT"
        "duration"                                        "2.0"
      }
      "02" // think interval is the third of duration value, so damage values doesn't need change
      {
        "var_type"                                        "FIELD_INTEGER"
        "damage"                                          "10 16 22 28"
      }
      "03"
      {
        "var_type"                                        "FIELD_INTEGER"
        "bonus_movement_speed"                            "-10 -20 -30 -40"
      }
      "04"
      {
        "var_type"                                        "FIELD_INTEGER"
        "bonus_attack_speed"                              "-10 -20 -30 -40"
      }
      "05"
      {
        "var_type"                                        "FIELD_INTEGER"
        "bonus_armor"                                     "-1 -3 -5 -7"
      }
      "06"
      {
        "var_type"                                        "FIELD_FLOAT"
        "intellect_damage_pct"                            "30 50 70 90"
      }
    }
    
    "Modifiers"
    {
      "modifier_emperor_attack_orb" // doesn't need tooltip
      {
        "Passive"                                         "1"    // needed for applying when learned
        "IsHidden"                                        "1"
        "IsPurgable"                                      "0"
        
        "Orb"
        {
          "Priority"                                      "DOTA_ORB_PRIORITY_ABILITY"
          "ProjectileName"                                "particles/units/heroes/hero_obsidian_destroyer/obsidian_destroyer_arcane_orb.vpcf"
          "CastAttack"                                    "1"
        }
        
        "OnOrbFire"
        {
          "SpendMana"
          {
            "Mana"                                        "%AbilityManaCost"
          }
          
          "FireSound"
          {
            "EffectName"                                  "Hero_ObsidianDestroyer.ArcaneOrb"
            "Target"                                      "CASTER"
          }
        }
        
        "OnOrbImpact"
        {
          "ApplyModifier"
          {
            "ModifierName"                                "modifier_emperor_attack_debuff"
            "Target"                                      "TARGET"
          }
          
          "FireSound"
          {
            "EffectName"                                  "Hero_Viper.PoisonAttack.Target"
            "Target"                                      "TARGET"
          }
          "RunScript"
          {
            "ScriptFile"                                  "heroes/emperor/emperor_trolling.lua"
            "Function"                                    "IntToDamage"
            "Target"                                      "TARGET"
          }
        }
      }
      
      "modifier_emperor_attack_debuff" // needs tooltip
      {
        "IsDebuff"                                        "1"
        "IsPurgable"                                      "1"
        "Duration"                                        "%duration"
        
        "EffectName"                                      "particles/units/heroes/hero_viper/viper_poison_debuff.vpcf"
        "EffectAttachType"                                "follow_origin"
        
        "ThinkInterval"                                   "1.0"
        
        "OnIntervalThink"
        {
          "Damage"
          {
            "Target"                                      "TARGET"
            "Type"                                        "DAMAGE_TYPE_MAGICAL"
            "Damage"                                      "%damage"
          }
        }
        
        "Properties"
        {
          "MODIFIER_PROPERTY_ATTACKSPEED_BONUS_CONSTANT"  "%bonus_attack_speed"
          "MODIFIER_PROPERTY_MOVESPEED_BONUS_PERCENTAGE"  "%bonus_movement_speed"
          "MODIFIER_PROPERTY_PHYSICAL_ARMOR_BONUS"        "%bonus_armor"
        }
      }
    }
  }
  
  //=================================================================================================================
  // Emperor of Srem: Emperor's Wrath (W) - New Spell, Lifestealer Rage + AoE Sleep and short duration reveal
  // Author: Darkonius
  // Notes: OK; 21.3.2016;
  // TO_DO:
  //=================================================================================================================
  "emperor_wrath"
  {
    // General
    //-------------------------------------------------------------------------------------------------------------
    "BaseClass"                                           "ability_datadriven"
    "AbilityBehavior"                                     "DOTA_ABILITY_BEHAVIOR_NO_TARGET | DOTA_ABILITY_BEHAVIOR_DONT_RESUME_ATTACK"
    "AbilityTextureName"                                  "emperor_wrath"
    "AbilityUnitTargetTeam"                               "DOTA_UNIT_TARGET_TEAM_ENEMY"
    "AbilityUnitTargetType"                               "DOTA_UNIT_TARGET_HERO | DOTA_UNIT_TARGET_BASIC"
    "AbilityUnitDamageType"                               "DAMAGE_TYPE_MAGICAL"
    "SpellImmunityType"                                   "SPELL_IMMUNITY_ENEMIES_NO"

    "precache"
    {
      "soundfile"                                         "soundevents/game_sounds_heroes/game_sounds_life_stealer.vsndevts"
      "particle"                                          "particles/units/heroes/hero_life_stealer/life_stealer_rage.vpcf"
      "particle"                                          "particles/status_fx/status_effect_life_stealer_rage.vpcf"
      "soundfile"                                         "soundevents/game_sounds_heroes/game_sounds_bane.vsndevts"
      "particle"                                          "particles/newplayer_fx/npx_sleeping.vpcf"
    }

    // Casting
    //-------------------------------------------------------------------------------------------------------------
    "AbilityCastPoint"                                    "0.6"
    
    // Time     
    //-------------------------------------------------------------------------------------------------------------
    "AbilityCooldown"                                     "20"
    
    // Cost
    //-------------------------------------------------------------------------------------------------------------
    "AbilityManaCost"                                     "175 185 195 205"
    
    // Special
    //-------------------------------------------------------------------------------------------------------------
    "AbilitySpecial"
    {
      "01"
      {
        "var_type"                                        "FIELD_INTEGER"
        "attack_speed_bonus"                              "30 40 50 60"
      }
      "02"
      {
        "var_type"                                        "FIELD_FLOAT"
        "buff_duration"                                   "3.0 4.0 5.0 6.0"
      }
      "03"
      {
        "var_type"                                        "FIELD_FLOAT"
        "invulnerable_duration"                           "0.8"
      }
      "04"
      {
        "var_type"                                        "FIELD_INTEGER"
        "radius"                                          "475"
      }
      "05"
      {
        "var_type"                                        "FIELD_FLOAT"
        "sleep_duration"                                  "2.0 3.0 4.0 5.0"
      }
      "06"
      {
        "var_type"                                        "FIELD_INTEGER"
        "wrath_damage"                                    "90 150 200 250"
      }
    }

    "OnSpellStart"
    {
      "FireSound"
      {
        "EffectName"                                      "Hero_LifeStealer.Rage"
        "Target"                                          "CASTER"
      }

      "RunScript"
      {
        "ScriptFile"                                      "heroes/emperor/emperor_wrath.lua"
        "Function"                                        "WrathPurge"
      }

      "ApplyModifier"
      {
        "ModifierName"                                    "modifier_wrath_caster"
        "Target"                                          "CASTER"
        "Duration"                                        "%buff_duration"
      }
      
      "Damage"
      {
        "Type"                                            "DAMAGE_TYPE_MAGICAL"
        "Damage"                                          "%wrath_damage"
        "Target"
        {
          "Center"                                        "CASTER"
          "Radius"                                        "%radius"
          "Teams"                                         "DOTA_UNIT_TARGET_TEAM_ENEMY"
          "Types"                                         "DOTA_UNIT_TARGET_HERO | DOTA_UNIT_TARGET_BASIC | DOTA_UNIT_TARGET_MECHANICAL | DOTA_UNIT_TARGET_OTHER"
        }
      }
      
      "ApplyModifier"
      {
        "ModifierName"                                    "modifier_wrath_sleep"
        "Target"     
        {
          "Center"                                        "CASTER"
          "Radius"                                        "%radius"
          "Teams"                                         "DOTA_UNIT_TARGET_TEAM_ENEMY"
          "Types"                                         "DOTA_UNIT_TARGET_HERO | DOTA_UNIT_TARGET_BASIC"
        }  
        "Duration"                                        "%sleep_duration"
      }
      
      "ApplyModifier"
      {
        "ModifierName"                                    "modifier_wrath_invulnerable"
        "Target"     
        {
          "Center"                                        "CASTER"
          "Radius"                                        "%radius"
          "Teams"                                         "DOTA_UNIT_TARGET_TEAM_ENEMY"
          "Types"                                         "DOTA_UNIT_TARGET_HERO | DOTA_UNIT_TARGET_BASIC"
        }  
        "Duration"                                        "%invulnerable_duration"
      }
    }

    "Modifiers"
    {
      "modifier_wrath_caster" // needs tooltip
      {
        "IsHidden"                                        "0"
        "IsBuff"                                          "1"
        "IsPurgable"                                      "0"

        "StatusEffectName"                                "particles/status_fx/status_effect_life_stealer_rage.vpcf"        
        "StatusEffectPriority"                            "10"
        
        "OnCreated"
        {
          "AttachEffect"
          {
            "EffectName"                                  "particles/units/heroes/hero_life_stealer/life_stealer_rage.vpcf"
            "EffectAttachType"                            "attach_hitloc"
            "Target"                                      "CASTER"
            "ControlPointEntities"
            {
              "CASTER"                                    "attach_hitloc"
              "CASTER"                                    "attach_hitloc"
              "CASTER"                                    "attach_hitloc"
            }
          }
        }
        
        "Properties"
        {
          "MODIFIER_PROPERTY_ATTACKSPEED_BONUS_CONSTANT"  "%attack_speed_bonus"
        }

        "States"
        {
          "MODIFIER_STATE_MAGIC_IMMUNE"                   "MODIFIER_STATE_VALUE_ENABLED"
        }
      }
      
      "modifier_wrath_sleep" // needs tooltip
      {
        "IsHidden"                                        "0"
        "IsDebuff"                                        "1"
        "IsPurgable"                                      "1"
        
        "EffectName"                                      "particles/newplayer_fx/npx_sleeping.vpcf"
        "EffectAttachType"                                "follow_overhead"
        
        "OverrideAnimation"                               "ACT_DOTA_DISABLED"
        
        "Priority"                                        "MODIFIER_PRIORITY_ULTRA"

        "States"
        {
          "MODIFIER_STATE_NIGHTMARED"                     "MODIFIER_STATE_VALUE_ENABLED"
          "MODIFIER_STATE_STUNNED"                        "MODIFIER_STATE_VALUE_ENABLED"
          "MODIFIER_STATE_LOW_ATTACK_PRIORITY"            "MODIFIER_STATE_VALUE_ENABLED"
          "MODIFIER_STATE_INVISIBLE"                      "MODIFIER_STATE_VALUE_DISABLED"
        }
        
        "OnTakeDamage"
        {
          "RemoveModifier"
          {
            "ModifierName"                                "modifier_wrath_sleep"
            "Target"                                      "UNIT"
          }
        }
        
        "OnDestroy"
        {
          "FireSound"
          {
            "EffectName"                                  "Hero_Bane.Nightmare.End"
            "Target"
            {
              "Center"                                    "TARGET"
              "Flags"                                     "DOTA_UNIT_TARGET_FLAG_MAGIC_IMMUNE_ENEMIES | DOTA_UNIT_TARGET_FLAG_INVULNERABLE"
            }
          }
        }
      }
      
      "modifier_wrath_invulnerable" // doesn't need tooltip
      {
        "IsDebuff"                                        "1"
        "IsPurgable"                                      "0"
        "IsHidden"                                        "1"
        
        "States"
        {
          "MODIFIER_STATE_INVULNERABLE"                   "MODIFIER_STATE_VALUE_ENABLED"
          "MODIFIER_STATE_ATTACK_IMMUNE"                  "MODIFIER_STATE_VALUE_ENABLED"
          "MODIFIER_STATE_MAGIC_IMMUNE"                   "MODIFIER_STATE_VALUE_ENABLED"
        }
      }
    }
  }
  
  //=================================================================================================================
  // Emperor of Srem: Back Off Peasants (R) - New Spell, Blinding Light + Damage around the caster
  // Author: Darkonius
  // Notes: OK; 21.3.2016;
  // TO_DO: Add particle around the caster that causes the knockback;
  //=================================================================================================================
  "emperor_back_off"
  {
    // General
    //-------------------------------------------------------------------------------------------------------------
    "BaseClass"                                           "ability_datadriven"
    "AbilityBehavior"                                     "DOTA_ABILITY_BEHAVIOR_NO_TARGET | DOTA_ABILITY_BEHAVIOR_IGNORE_CHANNEL"
    "AbilityType"                                         "DOTA_ABILITY_TYPE_ULTIMATE"
    "AbilityTextureName"                                  "emperor_back_off"
    "AbilityUnitTargetTeam"                               "DOTA_UNIT_TARGET_TEAM_ENEMY"
    "AbilityUnitTargetType"                               "DOTA_UNIT_TARGET_HERO | DOTA_UNIT_TARGET_BASIC"
    "AbilityUnitDamageType"                               "DAMAGE_TYPE_PURE"
    "SpellImmunityType"                                   "SPELL_IMMUNITY_ENEMIES_NO"
    
    "AbilityDamage"                                       "290 390 490"
    "AbilityManaCost"                                     "400 450 500"
    "AbilityProcsMagicStick"                              "1"
    "AbilityCooldown"                                     "150.0"

    // Precache
    //-------------------------------------------------------------------------------------------------------------
    "precache"
    {
      "soundfile"                                         "soundevents/game_sounds_heroes/game_sounds_keeper_of_the_light.vsndevts"
      "particle"                                          "particles/units/heroes/hero_keeper_of_the_light/keeper_of_the_light_blinding_light_debuff.vpcf"
    }
    // Casting
    //-------------------------------------------------------------------------------------------------------------
    "AbilityCastPoint"                                    "0.1"

    // Special
    //-------------------------------------------------------------------------------------------------------------
    "AbilitySpecial"
    {
      "01"
      {
        "var_type"                                        "FIELD_INTEGER"
        "radius"                                          "475"
      }
      "02"
      {
        "var_type"                                        "FIELD_FLOAT"
        "miss_duration"                                   "5.0 6.0 7.0"
      }
      "03"
      {
        "var_type"                                        "FIELD_INTEGER"
        "miss_rate"                                       "60 70 80"
      }
      "04" // if you change this, you need to change the tooltip note
      {
        "var_type"                                        "FIELD_INTEGER"
        "knockback_distance"                              "500"
      }
      "05"
      {
        "var_type"                                        "FIELD_INTEGER"
        "knockback_height"                                "50"
      }
      "06"
      {
        "var_type"                                        "FIELD_FLOAT"
        "knockback_duration"                              "0.4"
      }
      "07" // if you change this, you need to change the tooltip note
      {
        "var_type"                                        "FIELD_FLOAT"
        "tree_radius"                                     "150"
      }
    }

    "OnSpellStart"
    {
      "FireSound"
      {
        "EffectName"                                      "Hero_KeeperOfTheLight.BlindingLight"
        "Target"                                          "CASTER"
      }
      
      "ActOnTargets"
      {
        "Target"
        {
          "Center"                                        "CASTER"
          "Radius"                                        "%radius"
          "Teams"                                         "DOTA_UNIT_TARGET_TEAM_ENEMY"
          "Types"                                         "DOTA_UNIT_TARGET_HERO | DOTA_UNIT_TARGET_BASIC"
        }
        
        "Action"    
        {
          "Knockback"
          {
            "Target"                                      "TARGET"
            "Center"                                      "CASTER"
            "Distance"                                    "%knockback_distance"
            "Duration"                                    "%knockback_duration"
            "Height"                                      "%knockback_height"
            "IsFixedDistance"                             "1"
            "ShouldStun"                                  "1"  
          }
          
          "Damage"
          {
            "Type"                                        "DAMAGE_TYPE_PURE"
            "Damage"                                      "%AbilityDamage"
            "Target"                                      "TARGET"
          }
          
          "DelayedAction"
          {
            "Delay"                                       "%knockback_duration"
            "Action"    
            {
              "DestroyTrees"
              {
                "Target"                                  "TARGET"                 
                "Radius"                                  "%tree_radius"
              }
              
            }
          }        
          
          "ApplyModifier"
          {
            "ModifierName"                                "modifier_emperor_back_off"
            "Target"                                      "TARGET"
            "Duration"                                    "%miss_duration"
          }
        }
      }    
    }

    "Modifiers"
    {
      "modifier_emperor_back_off" // needs tooltip
      {
        "IsHidden"                                        "0"
        "IsDebuff"                                        "1"
        "IsPurgable"                                      "1"
        
        "EffectName"                                      "particles/units/heroes/hero_keeper_of_the_light/keeper_of_the_light_blinding_light_debuff.vpcf"
        "EffectAttachType"                                "follow_origin"
        
        "Properties"
        {
          "MODIFIER_PROPERTY_MISS_PERCENTAGE"             "%miss_rate" 
        }      
      }
    }  
  }
  
  //=================================================================================================================
  // Emperor of Srem: Emperor's Presence (T) - New Spell, Brilliance Aura that gives Intelligence to allies + Intelligence Gain when Enemies die near the Owner of the spell
  // Author: Darkonius
  // Notes: OK; 21.3.2016; Int Gain aura have some issues with illusions. If illusions kill the hero, bonus int is not applied to the original Emperor.
  // TO_DO:
  //=================================================================================================================
  "emperor_presence"
  {
    // General
    //-------------------------------------------------------------------------------------------------------------
    "BaseClass"                                           "ability_datadriven"
    "AbilityBehavior"                                     "DOTA_ABILITY_BEHAVIOR_PASSIVE | DOTA_ABILITY_BEHAVIOR_AURA"
    "AbilityUnitTargetTeam"                               "DOTA_UNIT_TARGET_TEAM_FRIENDLY"
    "AbilityTextureName"                                  "emperor_presence"
    
    // Special
    //-------------------------------------------------------------------------------------------------------------
    "AbilitySpecial"
    {
      "01"
      {
        "var_type"                                        "FIELD_FLOAT"
        "mana_regen"                                      "1.0 1.5 2.0 2.5"
      }
      "02"
      {
        "var_type"                                        "FIELD_INTEGER"
        "ally_bonus_intellect"                            "3 6 9 12"
      }
      "03"
      {
        "var_type"                                        "FIELD_INTEGER"
        "int_gain"                                        "1"
      }
      "04" // aura is global
      {
        "var_type"                                        "FIELD_INTEGER"
        "aura_radius"                                     "20000"
      }
      "05"
      {
        "var_type"                                        "FIELD_INTEGER"
        "int_gain_radius"                                 "900"
      }
    }

    "Modifiers"
    {
      "modifier_emperor_presence_aura" // doesn't need tooltip
      {
        "Passive"                                         "1"
        "IsBuff"                                          "1"
        "IsPurgable"                                      "0"
        "IsHidden"                                        "1"
        
        "AllowIllusionDuplicate"                          "1"
        
        "Aura"                                            "emperor_presence_aura_effect"
        "Aura_Radius"                                     "%aura_radius"
        "Aura_Teams"                                      "DOTA_UNIT_TARGET_TEAM_FRIENDLY"
        "Aura_Types"                                      "DOTA_UNIT_TARGET_HERO"
        "Aura_ApplyToCaster"                              "1" 
      }
      
      "emperor_presence_aura_effect" // needs tooltip
      {
        "Properties"
        {
          "MODIFIER_PROPERTY_MANA_REGEN_CONSTANT"         "%mana_regen"
          "MODIFIER_PROPERTY_STATS_INTELLECT_BONUS"       "%ally_bonus_intellect"
        }
      }
      
      "modifier_int_gain_aura"    // needs tooltip
      {
        "Passive"                                         "1"
        "IsHidden"                                        "0"
        "IsBuff"                                          "1"
        "IsPurgable"                                      "0"
        
        "AllowIllusionDuplicate"                          "0"

        "OnCreated"
        {
          "RunScript"
          {
            "ScriptFile"                                  "heroes/emperor/emperor_presence.lua"
            "Function"                                    "IntGain"
          }
        }

        "Aura"                                            "modifier_int_gain_datadriven"
        "Aura_Radius"                                     "%int_gain_radius"
        "Aura_Teams"                                      "DOTA_UNIT_TARGET_TEAM_ENEMY"
        "Aura_Types"                                      "DOTA_UNIT_TARGET_HERO"
        "Aura_Flags"                                      "DOTA_UNIT_TARGET_FLAG_MAGIC_IMMUNE_ENEMIES"
      }

      "modifier_int_gain_bonus"     // doesn't need tooltip
      {
        "IsHidden"                                        "1"
        "Attributes"                                      "MODIFIER_ATTRIBUTE_MULTIPLE | MODIFIER_ATTRIBUTE_PERMANENT"

        "Properties"
        {
          "MODIFIER_PROPERTY_STATS_INTELLECT_BONUS"       "%int_gain"
        }
      }
      
      "modifier_int_gain_datadriven"  // doesn't need tooltip
      {
        "IsHidden"                                        "1"

        "OnDeath"
        {
          "ApplyModifier"
          {
            "ModifierName"                                "modifier_int_gain_bonus"
            "Target"                                      "CASTER"
          }

          "RunScript"
          {
            "ScriptFile"                                  "heroes/emperor/emperor_presence.lua"
            "Function"                                    "StackCountIncrease"
          }
        }
      }
    }
  }
  
  //=================================================================================================================
  // Mimic: (Q) - New Spell, All INT to AGI, magical Damage to self and enemies while toggled. Also slows enemies.
  // Author: Darkonius
  // Notes: OK; 21.3.2016; Illusions of the fully morphed AGI hero don't have the same stats.
  // TO_DO:
  //=================================================================================================================
  "mimic_int_to_agi"
  {
    // General
    //-------------------------------------------------------------------------------------------------------------
    "BaseClass"                                           "ability_datadriven"
    "AbilityBehavior"                                     "DOTA_ABILITY_BEHAVIOR_NO_TARGET | DOTA_ABILITY_BEHAVIOR_TOGGLE | DOTA_ABILITY_BEHAVIOR_IGNORE_PSEUDO_QUEUE"
    "AbilityTextureName"                                  "mimic_int_to_agi"
    "AbilityUnitDamageType"                               "DAMAGE_TYPE_MAGICAL"
    "SpellImmunityType"                                   "SPELL_IMMUNITY_ENEMIES_NO"
    
    // Time    
    //-------------------------------------------------------------------------------------------------------------
    "AbilityCooldown"                                     "0.0"
    "AbilityManaCost"                                     "0"

    "precache"
    {
      "particle"                                          "particles/units/heroes/hero_morphling/morphling_morph_agi.vpcf"
      "particle"                                          "particles/units/heroes/hero_pudge/pudge_rot.vpcf"
      "soundfile"                                         "soundevents/game_sounds_heroes/game_sounds_morphling.vsndevts"
    }
    
    // Special
    //-------------------------------------------------------------------------------------------------------------
    "AbilitySpecial"
    {
      "01" // maybe it will be needed in the future for balance issues
      {
        "var_type"                                        "FIELD_INTEGER"
        "mana_cost_per_second"                            "0"
      }
      "02" // needed for damage and delay of turning all INT to AGI
      {
        "var_type"                                        "FIELD_FLOAT"
        "tick_interval"                                   "0.2"
      }
      "03" // not in tooltip; needed for damage
      {
        "var_type"                                        "FIELD_INTEGER"
        "damage_per_tick"                                 "7 12 18 24"
      }
      "04" // needed for damage
      {
        "var_type"                                        "FIELD_INTEGER"
        "damage_radius"                                   "250"
      }
      "05" // needed for int gain
      {
        "var_type"                                        "FIELD_INTEGER"
        "int_gain"                                        "2"
      }
      "06" // needed for int gain
      {
        "var_type"                                        "FIELD_INTEGER"
        "int_gain_radius"                                 "1800"
      }
      "07" // needed for tooltip; dps = damage_per_tick/tick_interval
      {
        "var_type"                                        "FIELD_INTEGER"
        "damage_per_second_tooltip"                       "35 60 90 120"
      }
      "08"
      {
        "var_type"                                        "FIELD_INTEGER"
        "slow"                                            "-27 -30 -33 -36"
      }
      "09"
      {
        "var_type"                                        "FIELD_INTEGER"
        "bonus_agi"                                       "3 4 5 6"
      }
    }
    
    "OnToggleOn"
    {
      "RunScript"
      {
        "ScriptFile"                                      "heroes/mimic/elokvenciranost.lua"
        "Function"                                        "elokvenciranost_on_toggle_on"
      }
      "ApplyModifier"
      {
        "ModifierName"                                    "modifier_elokvenciranost_damage"
        "Target"                                          "CASTER"
      }
    }
    
    "OnToggleOff"
    {
      "RunScript"
      {
        "ScriptFile"                                      "heroes/mimic/elokvenciranost.lua"
        "Function"                                        "elokvenciranost_on_toggle_off"
      }
      "RemoveModifier"
      {
        "ModifierName"                                    "modifier_elokvenciranost_damage"
        "Target"
        {
          "Center"                                        "CASTER"
          "Flags"                                         "DOTA_UNIT_TARGET_FLAG_DEAD"
        }
      }
    }
    
    "OnOwnerDied"
    {
      "RunScript"
      {
        "ScriptFile"                                      "heroes/mimic/elokvenciranost.lua"
        "Function"                                        "elokvenciranost_on_owner_died"
      }
    }
    
    "Modifiers"
    {
      "modifier_elokvenciranost_toggled_on"
      {
        "IsHidden"                                        "0"
        "EffectName"                                      "particles/units/heroes/hero_morphling/morphling_morph_agi.vpcf"
        "EffectAttachType"                                "follow_origin"
        
        "ThinkInterval"                                   "%tick_interval"
        "OnIntervalThink"
        {
          "RunScript"
          {
            "ScriptFile"                                  "heroes/mimic/elokvenciranost.lua"
            "Function"                                    "modifier_elokvenciranost_on_interval_think"
            "ManaCostPerSecond"                           "%mana_cost_per_second"
            "ShiftRate"                                   "%tick_interval"
          }
        }
      }
      
      "modifier_elokvenciranost_damage"
      {
        "IsDebuff"                                        "1"
        "IsHidden"                                        "0"

        "ThinkInterval"                                   "%tick_interval"

        "OnIntervalThink"
        {

          "Damage"
          {
            "Target"                                      "CASTER"
            "Type"                                        "DAMAGE_TYPE_MAGICAL"
            "Damage"                                      "%damage_per_tick"
          }

          "ActOnTargets"
          {
            "Target"
            {
              "Center"                                    "CASTER"
              "Radius"                                    "%damage_radius"
              "Teams"                                     "DOTA_UNIT_TARGET_TEAM_ENEMY" 
              "Types"                                     "DOTA_UNIT_TARGET_BASIC | DOTA_UNIT_TARGET_HERO"
            }

            "Action"
            {
              "Damage"
              {
                "Target"                                  "TARGET"
                "Type"                                    "DAMAGE_TYPE_MAGICAL"
                "Damage"                                  "%damage_per_tick"
              }
            }
          }
        }

        "OnCreated"
        {
          "AttachEffect"
          {
            "EffectName"                                  "particles/units/heroes/hero_pudge/pudge_rot.vpcf"
            "EffectAttachType"                            "follow_origin"
            "Target"                                      "CASTER"

            "ControlPoints"
            {
              "00"                                        "0 0 0"
              "01"                                        "%damage_radius 0 0"
            }
          }
        }
        
        "Aura"                                            "modifier_elokvenciranost_slow"
        "Aura_Radius"                                     "%damage_radius"
        "Aura_Teams"                                      "DOTA_UNIT_TARGET_TEAM_ENEMY"
        "Aura_Types"                                      "DOTA_UNIT_TARGET_HERO | DOTA_UNIT_TARGET_BASIC"
      }
      
      "modifier_elokvenciranost_slow" // needs tooltip
      {
        "IsHidden"                                        "0"
        "IsDebuff"                                        "1"
        "IsPurgable"                                      "0"
        "Duration"                                        "0.5"  // lingering_time

        "Properties"
        {
          "MODIFIER_PROPERTY_MOVESPEED_BONUS_PERCENTAGE"  "%slow"
        }
      }
      
      "modifier_elokvenciranost_int_gain_aura"
      {
        "Passive"                                         "1"

        "OnCreated"
        {
          "RunScript"
          {
            "ScriptFile"                                  "heroes/mimic/elokvenciranost.lua"
            "Function"                                    "IntGain"
          }
        }

        "Aura"                                            "modifier_elokvenciranost_int_gain_datadriven"
        "Aura_Radius"                                     "%int_gain_radius"
        "Aura_Teams"                                      "DOTA_UNIT_TARGET_TEAM_ENEMY"
        "Aura_Types"                                      "DOTA_UNIT_TARGET_HERO"
        "Aura_Flags"                                      "DOTA_UNIT_TARGET_FLAG_MAGIC_IMMUNE_ENEMIES"
        
        "AllowIllusionDuplicate"                          "0"
      }

      "modifier_elokvenciranost_int_gain_bonus"
      {
        "IsHidden"                                        "1"
        "Attributes"                                      "MODIFIER_ATTRIBUTE_MULTIPLE | MODIFIER_ATTRIBUTE_PERMANENT"
        
        "OnCreated"
        {
          "RunScript"
          {
            "ScriptFile"                                  "heroes/mimic/elokvenciranost.lua"
            "Function"                                    "GiveInt"
            "IntGain"                                     "%int_gain"
          }
        }
      }
      
      "modifier_elokvenciranost_int_gain_datadriven"
      {
        "IsHidden"                                        "1"
        "IsPurgable"                                      "0"

        "OnDeath"
        {
          "ApplyModifier"
          {
            "ModifierName"                                "modifier_elokvenciranost_int_gain_bonus"
            "Target"                                      "CASTER"
          }

          "RunScript"
          {
            "ScriptFile"                                  "heroes/mimic/elokvenciranost.lua"
            "Function"                                    "StackCountIncrease"
          }
        }
      }
      
      "modifier_elokvenciranost_passive_bonus"
      {
        "Passive"                                         "1"
        "IsHidden"                                        "1"
        "IsBuff"                                          "1"
        "IsPurgable"                                      "0"
        
        "AllowIllusionDuplicate"                          "1"
        
        "Properties"
        {
          "MODIFIER_PROPERTY_STATS_AGILITY_BONUS"         "%bonus_agi"
        }
      }
    }
  }
  
  //=================================================================================================================
  // Skeleton: Drink Milk (R) - New Spell, Caster gains Reflect buff (like Blademail + 100% damage reflect) and Milk Buff (STR Bonus and 100% reflect attack damage to range units); After delay caster is rooted and Acid Spray is around him.
  // Author: Darkonius
  // Notes: OK; 14.3.2016;
  // TO_DO:
  //=================================================================================================================
  "skeleton_milk"
  {
    // General
    //-------------------------------------------------------------------------------------------------------------
    "BaseClass"                                           "ability_datadriven"
    "AbilityBehavior"                                     "DOTA_ABILITY_BEHAVIOR_NO_TARGET | DOTA_ABILITY_BEHAVIOR_IMMEDIATE"
    "AbilityType"                                         "DOTA_ABILITY_TYPE_ULTIMATE"
    "AbilityTextureName"                                  "skeleton_milk"
    "AbilityUnitDamageType"                               "DAMAGE_TYPE_PHYSICAL"
    "SpellImmunityType"                                   "SPELL_IMMUNITY_ENEMIES_YES"
    
    // Time    
    //-------------------------------------------------------------------------------------------------------------
    "AbilityCastPoint"                                    "0"
    "AbilityCooldown"                                     "60.0 50.0 40.0"
    "AbilityManaCost"                                     "170 180 190"
    "AbilityProcsMagicStick"                              "1"

    "precache"
    {
      "soundfile"                                         "soundevents/game_sounds_heroes/game_sounds_alchemist.vsndevts"
      "soundfile"                                         "soundevents/game_sounds_heroes/game_sounds_sven.vsndevts"
      "particle"                                          "particles/units/heroes/hero_sven/sven_spell_gods_strength.vpcf"
      "particle"                                          "particles/units/heroes/hero_alchemist/alchemist_acid_spray.vpcf"
      "particle"                                          "particles/units/heroes/hero_nyx_assassin/nyx_assassin_spiked_carapace.vpcf"
      "particle"                                          "particles/units/heroes/hero_sven/sven_warcry_buff.vpcf"
    }
    
    // Special
    //-------------------------------------------------------------------------------------------------------------
    "AbilitySpecial"
    {
      "01" // reflecting all damage (all instances)
      {
        "var_type"                                        "FIELD_FLOAT"
        "reflect_duration"                                "2.25"
      }
      "02" // reflecting range attack projectiles
      {
        "var_type"                                        "FIELD_FLOAT"
        "range_reflect_duration"                          "4.0 6.0 8.0"
      }
      "03"
      {
        "var_type"                                        "FIELD_INTEGER"
        "bonus_strength"                                  "13 26 40"
      }
      "04"
      {
        "var_type"                                        "FIELD_FLOAT"
        "flasha_delay"                                    "15"
      }
      "05"
      {
        "var_type"                                        "FIELD_FLOAT"
        "pish_delay"                                      "16"
      }
      "06"
      {
        "var_type"                                        "FIELD_INTEGER"
        "pish_radius"                                     "625"
      }
      "07"
      {
        "var_type"                                        "FIELD_FLOAT"
        "pish_duration"                                   "16.0"
      }
      "08"
      {
        "var_type"                                        "FIELD_INTEGER"
        "pish_damage"                                     "25 30 35"
      }
      "09"
      {
        "var_type"                                        "FIELD_INTEGER"
        "armor_reduction"                                 "-6 -7 -8"
      }
      "10"
      {
        "var_type"                                        "FIELD_FLOAT"
        "tick_rate"                                       "1.0"
      }
      "11"
      {
        "var_type"                                        "FIELD_FLOAT"
        "rooted_duration"                                 "5.0"
      }
    }
    
    "OnSpellStart"
    {
      "FireSound"
      {
        "EffectName"                                      "Hero_Sven.GodsStrength"
        "Target"                                          "CASTER"
      }
      
      "FireEffect"
      {
        "EffectName"                                      "particles/units/heroes/hero_sven/sven_spell_gods_strength.vpcf"
        "EffectAttachType"                                "follow_origin"
        "Target"                                          "CASTER"
      }
      
      "ApplyModifier"
      {
        "Target"                                          "CASTER"
        "ModifierName"                                    "modifier_milk_beefed"
        "Duration"                                        "%range_reflect_duration"
      }
      
      "ApplyModifier"
      {
        "Target"                                          "CASTER"
        "ModifierName"                                    "modifier_milk_reflect_buff"
        "Duration"                                        "%reflect_duration"
      }
      
      "DelayedAction"
      {
        "Delay"                                           "%flasha_delay"
        "Action"
        {
          "ApplyModifier"
          {
            "Target"                                      "CASTER"
            "ModifierName"                                "modifier_pish_root"
            "Duration"                                    "%rooted_duration"
          }
          
          "FireSound"
          {
            "EffectName"                                  "Hero_Alchemist.UnstableConcoction.Stun"
            "Target"                                      "CASTER"
          }
        }
      }
      
      "DelayedAction"
      {
        "Delay"                                           "%pish_delay"
        "Action"
        {
          "CreateThinker"
          {
            "ModifierName"                                "modifier_pish_thinker"
            "Target"                                      "CASTER"
          }
        }
      }
    }
    
    "Modifiers"
    {
      "modifier_milk_beefed" // needs tooltip
      {
        "IsHidden"                                        "0"
        "IsBuff"                                          "1"
        "IsPurgable"                                      "0"
        
        "EffectName"                                      "particles/units/heroes/hero_sven/sven_warcry_buff.vpcf"
        "EffectAttachType"                                "follow_origin"
        
        "Properties"
        {
          "MODIFIER_PROPERTY_STATS_STRENGTH_BONUS"        "%bonus_strength"
        }
        
        "OnAttacked"
        {
          "RunScript"
          {
            "ScriptFile"                                  "heroes/milk.lua"
            "Function"                                    "milk_return"
            "DamageTaken"                                 "%attack_damage"
          }
        }
      }
      
      "modifier_milk_reflect_buff" // needs tooltip
      {
        "IsHidden"                                        "0"
        "IsBuff"                                          "1"
        "IsPurgable"                                      "0"
        
        "EffectName"                                      "particles/units/heroes/hero_nyx_assassin/nyx_assassin_spiked_carapace.vpcf"
        
        "OnTakeDamage"
        {
          "RunScript"
          {
            "ScriptFile"                                  "heroes/milk.lua"
            "Function"                                    "milk_reflect"
            "DamageTaken"                                 "%attack_damage"
          }
        }
      }
      
      "modifier_pish_thinker"
      {
        "IsHidden"                                        "1"
        "IsPurgable"                                      "0"
        
        "Aura"                                            "modifier_pish"
        "Aura_Radius"                                     "%pish_radius"
        "Aura_Teams"                                      "DOTA_UNIT_TARGET_TEAM_ENEMY"
        "Aura_Types"                                      "DOTA_UNIT_TARGET_HERO | DOTA_UNIT_TARGET_BASIC | DOTA_UNIT_TARGET_MECHANICAL"
        "Aura_Flags"                                      "DOTA_UNIT_TARGET_FLAG_MAGIC_IMMUNE_ENEMIES"
        "Duration"                                        "%pish_duration"

        "OnCreated"
        {
          "RunScript"
          {
            "ScriptFile"                                  "heroes/milk.lua"
            "Function"                                    "AcidSpraySound"
          }

          "AttachEffect"
          {
            "EffectName"                                  "particles/units/heroes/hero_alchemist/alchemist_acid_spray.vpcf"
            "EffectAttachType"                            "follow_origin"
            "Target"                                      "TARGET"
            "ControlPoints"
            {
              "00"                                        "0 0 0"
              "01"                                        "%pish_radius 1 1"
              "15"                                        "25 150 25"
              "16"                                        "0 0 0"
            }
          }
        }
      }

      "modifier_pish" // needs tooltip
      {
        "IsDebuff"                                        "1"
        "IsPurgable"                                      "0"
        
        "ThinkInterval"                                   "%tick_rate"
        "Properties"
        {
          "MODIFIER_PROPERTY_PHYSICAL_ARMOR_BONUS"        "%armor_reduction"
        }
        "OnIntervalThink"
        {
          "FireSound"
          {
            "EffectName"                                  "Hero_Alchemist.AcidSpray.Damage"
            "Target"
            {
              "Center"                                    "TARGET"
              "Flags"                                     "DOTA_UNIT_TARGET_FLAG_MAGIC_IMMUNE_ENEMIES"
            }
          }
          "Damage"
          {
            "Target"
            {
              "Center"                                    "TARGET"
              "Flags"                                     "DOTA_UNIT_TARGET_FLAG_MAGIC_IMMUNE_ENEMIES"
            }
            "Type"                                        "DAMAGE_TYPE_PHYSICAL"
            "Damage"                                      "%pish_damage"
          }
        }
      }
      
      "modifier_pish_root" // needs tooltip
      {
        "IsHidden"                                        "0"
        "IsDebuff"                                        "1"
        "IsPurgable"                                      "1"
        
        "States"
        {
          "MODIFIER_STATE_ROOTED"                         "MODIFIER_STATE_VALUE_ENABLED"
        }
      }
    }
  }
  
  //=================================================================================================================
  // Mimic: OET (E) - New Spell, AGI to INT, bonus INT and bonus magic resistance
  // Author: Darkonius
  // Notes: OK; 21.3.2016; Illusions of the fully morphed INT hero don't have the same stats.
  // TO_DO: 
  //=================================================================================================================
  "mimic_agi_to_int"
  {
    // General
    //-------------------------------------------------------------------------------------------------------------
    "BaseClass"                                           "ability_datadriven"
    "AbilityBehavior"                                     "DOTA_ABILITY_BEHAVIOR_NO_TARGET | DOTA_ABILITY_BEHAVIOR_TOGGLE | DOTA_ABILITY_BEHAVIOR_IGNORE_PSEUDO_QUEUE"
    "AbilityTextureName"                                  "mimic_agi_to_int"
    
    // Time    
    //-------------------------------------------------------------------------------------------------------------
    "AbilityCooldown"                                     "0.0"
    
    "precache"
    {
      "particle"                                          "particles/units/heroes/hero_morphling/morphling_morph_str.vpcf"
      "soundfile"                                         "soundevents/game_sounds_heroes/game_sounds_morphling.vsndevts"
    }

    // Special
    //-------------------------------------------------------------------------------------------------------------
    "AbilitySpecial"
    {
      "01"
      {
        "var_type"                                        "FIELD_INTEGER"
        "mana_cost_per_second"                            "0"
      }
      "02"
      {
        "var_type"                                        "FIELD_INTEGER"
        "points_per_tick"                                 "2"
      }
      "03"
      {
        "var_type"                                        "FIELD_FLOAT"
        "shift_rate"                                      "0.5 0.33 0.25 0.125"
      }
      "04"
      {
        "var_type"                                        "FIELD_INTEGER"
        "bonus_int"                                       "3 4 5 6"
      }
      "05"
      {
        "var_type"                                        "FIELD_INTEGER"
        "bonus_resistance"                                "26 34 42 50"
      }
    }
    
    "OnToggleOn"
    {
      "RunScript"
      {
        "ScriptFile"                                      "heroes/mimic/revert.lua"
        "Function"                                        "revert_on_toggle_on"
      }
    }
    
    "OnToggleOff"
    {
      "RunScript"
      {
        "ScriptFile"                                      "heroes/mimic/revert.lua"
        "Function"                                        "revert_on_toggle_off"
      }
    }
    
    "OnOwnerDied"
    {
      "RunScript"
      {
        "ScriptFile"                                      "heroes/mimic/revert.lua"
        "Function"                                        "revert_on_owner_died"
      }
    }
    
    "Modifiers"
    {
      "modifier_revert_passive_bonus" // this modifier is hidden passive, doesn't need tooltip
      {
        "Passive"                                         "1"
        "IsHidden"                                        "1"
        "IsBuff"                                          "1"
        "IsPurgable"                                      "0"
        
        "AllowIllusionDuplicate"                          "1"
        
        "Properties"
        {
          "MODIFIER_PROPERTY_STATS_INTELLECT_BONUS"       "%bonus_int"
          "MODIFIER_PROPERTY_MAGICAL_RESISTANCE_BONUS"    "%bonus_resistance"
        }
      }
      
      "modifier_revert_toggled_on" // needs tooltip
      {
        "IsHidden"                                        "0"
        "EffectName"                                      "particles/units/heroes/hero_morphling/morphling_morph_str.vpcf"
        "EffectAttachType"                                "follow_origin"
        
        "ThinkInterval"                                   "%shift_rate"
        "OnIntervalThink"
        {
          "RunScript"
          {
            "ScriptFile"                                  "heroes/mimic/revert.lua"
            "Function"                                    "modifier_revert_on_interval_think"
            "PointsPerTick"                               "%points_per_tick"
            "ManaCostPerSecond"                           "%mana_cost_per_second"
            "ShiftRate"                                   "%shift_rate"
          }
        }
      }
    }
  }
  
  //=================================================================================================================
  // Skeleton: Sarcasm (T) - New Spell, On Success Crit, Mana Break always (not on magic immune and those who doesn't have mana)
  // Author: Darkonius
  // Notes: OK; 25.4.2016;
  // TO_DO:
  //=================================================================================================================
  "skeleton_sarcasm"
  {
    // General
    //-------------------------------------------------------------------------------------------------------------
    "BaseClass"                                           "ability_datadriven"
    "AbilityTextureName"                                  "skeleton_sarcasm"
    "AbilityBehavior"                                     "DOTA_ABILITY_BEHAVIOR_PASSIVE"
    "AbilityType"                                         "DOTA_ABILITY_TYPE_BASIC"
    "AbilityUnitDamageType"                               "DAMAGE_TYPE_PHYSICAL"
    "SpellImmunityType"                                   "SPELL_IMMUNITY_ENEMIES_NO"
    
    "precache"
    {
      "particle"                                          "particles/generic_gameplay/generic_manaburn.vpcf"
      "soundfile"                                         "soundevents/game_sounds_heroes/game_sounds_antimage.vsndevts"
      "soundfile"                                         "soundevents/game_sounds_heroes/game_sounds_phantom_assassin.vsndevts"
    }
    // Special
    //-------------------------------------------------------------------------------------------------------------
    "AbilitySpecial"
    {
      "01"
      {
        "var_type"                                        "FIELD_INTEGER"
        "crit_bonus"                                      "200 300 400 500"
      }
      "02"
      {
        "var_type"                                        "FIELD_INTEGER"
        "crit_chance"                                     "1"
      }
      "03"
      {
        "var_type"                                        "FIELD_INTEGER"
        "mana_per_hit"                                    "28 40 52 64"
      }
      "04" // if you change this, you need to change the ability description tooltip
      {
        "var_type"                                        "FIELD_FLOAT"
        "damage_per_burn"                                 "0.6"
      }
    }

    "Modifiers"
    {
      "modifier_sarcasm" // doesn't need tooltip
      {
        "Passive"                                         "1"
        "IsHidden"                                        "1"
        "IsPurgable"                                      "0"
        
        "AllowIllusionDuplicate"                          "1"
        
        "Orb"
        {
          "Priority"                                      "DOTA_ORB_PRIORITY_ABILITY"
        }
        
        "OnOrbImpact"
        {
          "RunScript"
          {
            "ScriptFile"                                  "heroes/sarcasm.lua"
            "Function"                                    "ManaBreak"
            "Target"                                      "TARGET"
          }    
        }
      }
      
      "modifier_sarcasm_crit_part" // doesn't need tooltip
      {
        "Passive"                                         "1"
        "IsHidden"                                        "1"
        "IsPurgable"                                      "0"
        
        "AllowIllusionDuplicate"                          "1"
        
        "OnAttackStart"
        {
          "RemoveModifier"
          {
            "ModifierName"                                "modifier_sarcasm_crit"
            "Target"                                      "CASTER"
          }

          "Random"
          {
            "Chance"                                      "%crit_chance"
            "PseudoRandom"                                "DOTA_PSEUDO_RANDOM_PHANTOMASSASSIN_CRIT"

            "OnSuccess"
            {
              "ApplyModifier"
              {
                "ModifierName"                            "modifier_sarcasm_crit"
                "Target"                                  "CASTER"
              }
            }
          }
        }
      }
      
      "modifier_sarcasm_crit" // doesn't need tooltip
      {
        "IsHidden"                                        "1"
        "IsPurgable"                                      "0"

        "Properties"
        {
          "MODIFIER_PROPERTY_PREATTACK_CRITICALSTRIKE"    "%crit_bonus"
        }

        "OnAttackLanded"
        {
          "RemoveModifier"
          {
            "ModifierName"                                "modifier_sarcasm_crit"
            "Target"                                      "CASTER"
          }

          "FireSound"
          {
            "EffectName"                                  "Hero_PhantomAssassin.CoupDeGrace"
            "Target"
            {
              "Center"                                    "TARGET"
              "Flags"                                     "DOTA_UNIT_TARGET_FLAG_MAGIC_IMMUNE_ENEMIES"
            }
          }
        }
      }
    }
  }
  
  //=================================================================================================================
  // Skeleton: Terrorize (W) - New Spell, Damage based on mana missing and difference of intelligence or agi of caster; Silence, Disarms only range units
  // Author: Darkonius
  // Notes: OK; 23.1.2016;
  // Linkens: Blocks
  // TO_DO:
  //=================================================================================================================
  "skeleton_terror"
  {
    // General
    //-------------------------------------------------------------------------------------------------------------
    "BaseClass"                                           "ability_datadriven"
    "AbilityTextureName"                                  "skeleton_terror"
    "AbilityBehavior"                                     "DOTA_ABILITY_BEHAVIOR_UNIT_TARGET"
    "AbilityUnitDamageType"                               "DAMAGE_TYPE_MAGICAL"
    "AbilityUnitTargetTeam"                               "DOTA_UNIT_TARGET_TEAM_ENEMY"
    "AbilityUnitTargetType"                               "DOTA_UNIT_TARGET_HERO | DOTA_UNIT_TARGET_BASIC"
    "SpellImmunityType"                                   "SPELL_IMMUNITY_ENEMIES_NO"
    
    // Casting
    //-------------------------------------------------------------------------------------------------------------
    "AbilityCastPoint"                                    "0.1"
    "AbilityCastRange"                                    "600 700 800 900"

    // Time    
    //-------------------------------------------------------------------------------------------------------------
    "AbilityCooldown"                                     "20.0"

    // Cost
    //-------------------------------------------------------------------------------------------------------------
    "AbilityManaCost"                                     "110"  
    "AbilityProcsMagicStick"                              "1"

    // Special
    //-------------------------------------------------------------------------------------------------------------
    "AbilitySpecial"
    {
      "01"
      {
        "var_type"                                        "FIELD_FLOAT"
        "damage_per_mana_missing"                         "0.1 0.2 0.3 0.4"
      }
      "02"
      {
        "var_type"                                        "FIELD_FLOAT"
        "silence_duration"                                "1.5 2.25 3.0 3.75"
      }
      "03"
      {
        "var_type"                                        "FIELD_FLOAT"
        "agi_multiplier"                                  "0.5 1.0 1.5 2.0"
      }
      "04"
      {
        "var_type"                                        "FIELD_FLOAT"
        "int_difference_multiplier"                       "2.5 3.0 3.5 4.0"
      }
      "05"
      {
        "var_type"                                        "FIELD_FLOAT"
        "range_disarm_duration"                           "2.0 2.5 3.0 3.5"
      }
      "06"
      {
        "var_type"                                        "FIELD_INTEGER"
        "base_damage"                                     "100 200 300 400"
      }
    }
    
    // Precache
    //-------------------------------------------------------------------------------------------------------------
    "precache"
    {
      "soundfile"                                         "soundevents/game_sounds_heroes/game_sounds_puck.vsndevts"
    }
    
    "OnSpellStart"
    {
      "RunScript"
      {
        "ScriptFile"                                      "heroes/terror.lua"
        "Function"                                        "Terrorize"
      }
    }
    
    "Modifiers"
    {
      "modifier_terrified" // needs tooltip
      {
        "IsDebuff"                                        "1"
        "IsPurgable"                                      "1"

        "EffectName"                                      "particles/generic_gameplay/generic_silenced.vpcf"
        "EffectAttachType"                                "follow_overhead"
        
        "States"
        {
          "MODIFIER_STATE_SILENCED"                       "MODIFIER_STATE_VALUE_ENABLED"
        }
      }
      
      "modifier_terror_disarmed" // needs tooltip
      {
        "IsDebuff"                                        "1"
        "IsPurgable"                                      "1"

        "EffectName"                                      "particles/generic_gameplay/generic_disarm.vpcf"
        "EffectAttachType"                                "follow_overhead"
        
        "States"
        {
          "MODIFIER_STATE_DISARMED"                       "MODIFIER_STATE_VALUE_ENABLED"
        }
      }
    }
  }
  
  //=================================================================================================================
  // Skeleton: Frictionless Speed (F) - New Spell, Invisibility, Free Pathing and Increased Speed. If damaged -> increased speed and free pathing is lost.
  // Author: Darkonius
  // Notes: OK; 23.1.2016;
  // TO_DO:
  //=================================================================================================================
  "skeleton_walk"
  {
    // General
    //-------------------------------------------------------------------------------------------------------------
    "BaseClass"                                           "ability_datadriven"
    "AbilityBehavior"                                     "DOTA_ABILITY_BEHAVIOR_NO_TARGET | DOTA_ABILITY_BEHAVIOR_IMMEDIATE | DOTA_ABILITY_BEHAVIOR_IGNORE_CHANNEL"
    "AbilityTextureName"                                  "clinkz_wind_walk"
    "RequiredLevel"                                       "3"              //ok
    
    // Time    
    //-------------------------------------------------------------------------------------------------------------
    "AbilityCooldown"                                     "20.0"            //ok
    "AbilityCastPoint"                                    "0.0"
    
    // Cost
    //-------------------------------------------------------------------------------------------------------------
    "AbilityManaCost"                                     "100"            //ok
    "AbilityProcsMagicStick"                              "1"              //ok
    
    // Special
    //-------------------------------------------------------------------------------------------------------------
    "AbilitySpecial"
    {
      "01"
      {
        "var_type"                                        "FIELD_FLOAT"
        "duration"                                        "20.0 25.0 30.0 35.0"  //ok
      }
      "02"
      {
        "var_type"                                        "FIELD_INTEGER"
        "move_speed_bonus_pct"                            "10 20 30 40"      //ok
      }
    }

    "precache"
    {
      "particle"                                          "particles/units/heroes/hero_clinkz/clinkz_windwalk.vpcf"
      "soundfile"                                         "soundevents/game_sounds_heroes/game_sounds_clinkz.vsndevts"
    }

    "OnSpellStart"
    {
      "FireEffect"
      {
        "EffectName"                                      "particles/units/heroes/hero_clinkz/clinkz_windwalk.vpcf"
        "EffectAttachType"                                "attach_origin"
        "Target"                                          "CASTER"
      }

      "FireSound"
      {
        "Target"                                          "CASTER"
        "EffectName"                                      "Hero_Clinkz.WindWalk"
      }

      "ApplyModifier"
      {
        "Target"                                          "CASTER"
        "ModifierName"                                    "modifier_trenja_walk_invisible"
        "Duration"                                        "%duration"
      }
      
      "ApplyModifier"
      {
        "Target"                                          "CASTER"
        "ModifierName"                                    "modifier_trenja_walk_free_pathing"
        "Duration"                                        "%duration"
      }
      
      "ApplyModifier"
      {
        "Target"                                          "CASTER"
        "ModifierName"                                    "modifier_invisible"
      }
    }

    "Modifiers"
    {
      "modifier_trenja_walk_invisible" // doesn't need tooltip
      {
        "IsHidden"                                        "1"
        "IsBuff"                                          "1"
        "IsPurgable"                                      "1"
        
        "OnAttackLanded"
        {
          "RemoveModifier"
          {
            "Target"                                      "CASTER"
            "ModifierName"                                "modifier_trenja_walk_invisible"
          }
          "RemoveModifier"
          {
            "Target"                                      "CASTER"
            "ModifierName"                                "modifier_trenja_walk_free_pathing"
          }
          "RemoveModifier"
          {
            "Target"                                      "CASTER"
            "ModifierName"                                "modifier_invisible"
          }
        }

        "OnAbilityExecuted"
        {
          "RemoveModifier"
          {
            "Target"                                      "CASTER"
            "ModifierName"                                "modifier_trenja_walk_invisible"
          }
          "RemoveModifier"
          {
            "Target"                                      "CASTER"
            "ModifierName"                                "modifier_trenja_walk_free_pathing"
          }
          "RemoveModifier"
          {
            "Target"                                      "CASTER"
            "ModifierName"                                "modifier_invisible"
          }
        }
        
        "States"
        {
          "MODIFIER_STATE_INVISIBLE"                      "MODIFIER_STATE_VALUE_ENABLED"
          "MODIFIER_STATE_NO_UNIT_COLLISION"              "MODIFIER_STATE_VALUE_ENABLED"  //no unit collision
        }

        "OnDestroy"
        {
          "RemoveModifier"
          {
            "Target"
            {
              "Center"                                    "CASTER"
              "Flags"                                     "DOTA_UNIT_TARGET_FLAG_DEAD"
            }
            "ModifierName"                                "modifier_invisible"
          }
        }
      }
      
      "modifier_trenja_walk_free_pathing" // needs tooltip
      {
        "IsHidden"                                        "0"
        "IsBuff"                                          "1"
        "IsPurgable"                                      "1"
        
        "OnTakeDamage"
        {
          "RemoveModifier"
          {
            "Target"                                      "CASTER"
            "ModifierName"                                "modifier_trenja_walk_free_pathing"
          }
        }

        "Properties"
        {
          "MODIFIER_PROPERTY_MOVESPEED_BONUS_PERCENTAGE"  "%move_speed_bonus_pct"
        }

        "States"
        {
          "MODIFIER_STATE_FLYING"                         "MODIFIER_STATE_VALUE_ENABLED"  // free pathing
          "MODIFIER_STATE_NOT_ON_MINIMAP_FOR_ENEMIES"     "MODIFIER_STATE_VALUE_ENABLED"  // not visible on minimap for enemies
        }
      }
    }
  }
  
  //=================================================================================================================
  // Che Monk: Che Energy (W) - New Spell, Charge Based, Skillshot
  // Author: Darkonius
  // Notes: OK; 11.2.2016;
  // TO_DO: Fix visual issues if there are any.
  //=================================================================================================================
  "che_che_energy"
  {
    "BaseClass"                                           "ability_datadriven"
    "AbilityBehavior"                                     "DOTA_ABILITY_BEHAVIOR_DIRECTIONAL | DOTA_ABILITY_BEHAVIOR_POINT | DOTA_ABILITY_BEHAVIOR_IGNORE_BACKSWING"
    "AbilityType"                                         "DOTA_ABILITY_TYPE_BASIC"
    "AbilityTextureName"                                  "tinker_heat_seeking_missile"
    
    "AbilityUnitDamageType"                               "DAMAGE_TYPE_MAGICAL"
    "AbilityUnitTargetTeam"                               "DOTA_UNIT_TARGET_TEAM_ENEMY"
    "AbilityUnitTargetType"                               "DOTA_UNIT_TARGET_HERO | DOTA_UNIT_TARGET_BASIC"
    "SpellImmunityType"                                   "SPELL_IMMUNITY_ENEMIES_NO"
    
    "AbilityCastRange"                                    "3000"
    "AbilityCastPoint"                                    "0.01"

    "AbilityDamage"                                       "80 120 150 180"          // 3 charges

    // Cost
    //-------------------------------------------------------------------------------------------------------------
    "AbilityManaCost"                                     "75 85 95 105"
    "AbilityProcsMagicStick"                              "1"

    // Special
    //-------------------------------------------------------------------------------------------------------------
    "AbilitySpecial"
    {
      "01"
      {
        "var_type"                                        "FIELD_FLOAT"
        "rocket_speed"                                    "950.0"
      }
      "02"
      {
        "var_type"                                        "FIELD_INTEGER"
        "rocket_width"                                    "115"
      }
      "03"
      {
        "var_type"                                        "FIELD_INTEGER"
        "rocket_range"                                    "3000"
      }
      "04"
      {
        "var_type"                                        "FIELD_FLOAT"
        "rocket_stun"                                     "0.5"
      }
      "05"
      {
        "var_type"                                        "FIELD_INTEGER"
        "rocket_vision"                                   "450"
      }
      "06"
      {
        "var_type"                                        "FIELD_INTEGER"
        "rocket_boom_radius"                              "200"
      }
      "07"
      {
        "var_type"                                        "FIELD_INTEGER"
        "maximum_charges"                                 "3"
      }
      "08"
      {
        "var_type"                                        "FIELD_FLOAT"
        "charge_replenish_time"                           "17.0"
      }
    }

    "precache"
    {
      "soundfile"                                         "soundevents/game_sounds_heroes/game_sounds_tinker.vsndevts"
      "particle"                                          "particles/projectile_linear/che_energy_rocket_projectile_linear.vpcf"
      "particle"                                          "particles/units/heroes/hero_tinker/tinker_missle_explosion.vpcf"
    }

    "OnUpgrade"
    {
      "RunScript"
      {
        "ScriptFile"                                      "heroes/che/che_energy.lua"
        "Function"                                        "rocket_start_charge"
      }
    }
    
    "OnSpellStart"
    {
      "RunScript"
      {
        "ScriptFile"                                      "heroes/che/che_energy.lua"
        "Function"                                        "rocket_fire"
      }
      
      "LinearProjectile"
      {
        "Target"                                          "POINT"
        "EffectName"                                      "particles/projectile_linear/che_energy_rocket_projectile_linear.vpcf"
        "MoveSpeed"                                       "%rocket_speed"
        "StartRadius"                                     "%rocket_width"
        "StartPosition"                                   "attach_origin"
        "EndRadius"                                       "%rocket_width"
        "FixedDistance"                                   "%rocket_range"
        "TargetTeams"                                     "DOTA_UNIT_TARGET_TEAM_ENEMY"
        "TargetTypes"                                     "DOTA_UNIT_TARGET_BASIC | DOTA_UNIT_TARGET_HERO"
        "TargetFlags"                                     "DOTA_UNIT_TARGET_FLAG_NONE"
        "HasFrontalCone"                                  "0"
        "ProvidesVision"                                  "1"
        "VisionRadius"                                    "%rocket_vision"
      }
      
      "FireSound"
      {
        "Target"                                          "CASTER"
        "EffectName"                                      "Hero_Tinker.Heat-Seeking_Missile"
      }
    }
    
    "OnProjectileHitUnit"
    {
      "FireSound"
      {
        "EffectName"                                      "Hero_Tinker.Heat-Seeking_Missile.Impact"
        "Target"                                          "TARGET"
      }

      "FireEffect"
      {
        "Target"                                          "TARGET"
        "EffectName"                                      "particles/units/heroes/hero_tinker/tinker_missle_explosion.vpcf"
        "EffectAttachType"                                "start_at_origin"
      }
      
      "ActOnTargets"
      {
        "Target"
        {
          "Center"                                        "POINT"
          "Radius"                                        "%rocket_boom_radius"
          "Teams"                                         "DOTA_UNIT_TARGET_TEAM_ENEMY" 
          "Types"                                         "DOTA_UNIT_TARGET_BASIC | DOTA_UNIT_TARGET_HERO"
        }
        
        "Action"
        {
          "Stun"
          {
            "Duration"                                    "%rocket_stun"
            "Target"                                      "TARGET"
          }
          
          "Damage"
          {
            "Target"                                      "TARGET"
            "Damage"                                      "%AbilityDamage"
            "Type"                                        "DAMAGE_TYPE_MAGICAL"
          }
        }
      }
    }
    
    "Modifiers"
    {
      "modifier_rocket_stack_counter" // needs tooltip
      {
        "Passive"                                         "1"
        "IsHidden"                                        "0"
        "IsPurgable"                                      "0"
        "IsDebuff"                                        "0"
      }
    }
  }
  
  //=================================================================================================================
  // Che Monk: ZOOM ZOOM (T) - New Spell, Chance to do critical damage on any damage done
  // Author: Darkonius
  // Notes: OK; 21.3.2016;
  // TO_DO: Add animation/particle on crit.
  //=================================================================================================================
  "che_zoom_zoom"
  {
    // General
    //-------------------------------------------------------------------------------------------------------------
    "BaseClass"                                           "ability_datadriven"
    "AbilityBehavior"                                     "DOTA_ABILITY_BEHAVIOR_PASSIVE"
    "AbilityType"                                         "DOTA_ABILITY_TYPE_BASIC"
    "AbilityUnitDamageType"                               "DAMAGE_TYPE_MAGICAL"
    "SpellImmunityType"                                   "SPELL_IMMUNITY_ENEMIES_NO"
    "AbilityTextureName"                                  "zuus_static_field"

    // Precache
    //-------------------------------------------------------------------------------------------------------------
    "precache"
    {
      "soundfile"                                         "soundevents/game_sounds_heroes/game_sounds_phantom_assassin.vsndevts"
      "particle"                                          "particles/units/heroes/hero_phantom_assassin/phantom_assassin_crit_impact.vpcf"
    }

    "AbilitySpecial"
    {
      "01"
      {
        "var_type"                                        "FIELD_FLOAT"
        "crit_bonus"                                      "1.5 2.0 2.25 2.5"
      }
      "02"
      {
        "var_type"                                        "FIELD_INTEGER"
        "crit_chance"                                     "10"
      }
    }

    "Modifiers"
    {
      "modifier_zoom_zoom" // doesn't need tooltip
      {
        "Passive"                                         "1"
        "IsHidden"                                        "1"
        "IsBuff"                                          "1"
        "IsPurgable"                                      "0"
        
        "AllowIllusionDuplicate"                          "1"

        "OnDealDamage"
        {
          "Random"
          {
            "Chance"                                      "%crit_chance"
            "PseudoRandom"                                "DOTA_PSEUDO_RANDOM_PHANTOMASSASSIN_CRIT"

            "OnSuccess"
            {
              "Damage"
              {
                "Target"                                  "UNIT"
                "Type"                                    "DAMAGE_TYPE_MAGICAL"
                "Damage"                                  "%attack_damage * (%crit_bonus - 1)"
              }
              
              "FireSound"
              {
                "EffectName"                              "Hero_PhantomAssassin.CoupDeGrace"
                "Target"                                  "UNIT"
              }
            }
          }
        }
      }
    }
  }
  
  //=================================================================================================================
  // Che Monk: Lupi Glupost (F) - New Spell - 50% Chance to Chaos Bolt without damage + Mana Steal
  // Author: Darkonius
  // Linkens: Blocks
  // Notes: OK; Pseudo Random; 11.2.2016;
  // TO_DO:
  //=================================================================================================================
  "che_lupi_glupost"
  {
    // General
    //-------------------------------------------------------------------------------------------------------------
    "BaseClass"                                           "ability_datadriven"
    "AbilityBehavior"                                     "DOTA_ABILITY_BEHAVIOR_UNIT_TARGET"
    "AbilityType"                                         "DOTA_ABILITY_TYPE_BASIC"
    "AbilityUnitTargetTeam"                               "DOTA_UNIT_TARGET_TEAM_ENEMY"
    "AbilityUnitTargetType"                               "DOTA_UNIT_TARGET_HERO | DOTA_UNIT_TARGET_BASIC"
    "SpellImmunityType"                                   "SPELL_IMMUNITY_ENEMIES_NO"
    "AbilityTextureName"                                  "che_lupi_glupost"
    
    "precache"
    {
      "soundfile"                                         "soundevents/game_sounds_heroes/game_sounds_chaos_knight.vsndevts"
      "particle"                                          "particles/units/heroes/hero_chaos_knight/chaos_knight_chaos_bolt.vpcf"
      "particle"                                          "particles/units/heroes/hero_chaos_knight/chaos_knight_bolt_msg.vpcf"
    }
    
    "AbilityCastRange"                                    "700"
    "AbilityCastPoint"                                    "0.4"
    "AbilityCooldown"                                     "20.0 12.0 10.0 8.0"
    "AbilityManaCost"                                     "100"
    "AbilityProcsMagicStick"                              "1"

    "AbilitySpecial"
    {
      "01"
      {
        "var_type"                                        "FIELD_INTEGER"
        "glupost_speed"                                   "1000"
      }
      "02"
      {
        "var_type"                                        "FIELD_INTEGER"
        "stun_min"                                        "1 1 1 2"
      }
      "03"
      {
        "var_type"                                        "FIELD_INTEGER"
        "stun_max"                                        "2 3 4 4"
      }
      "04"
      {
        "var_type"                                        "FIELD_INTEGER"
        "mana_burn"                                       "150 200 250 300"
      }
      "05"
      {
        "var_type"                                        "FIELD_INTEGER"
        "glupost_chance"                                  "50"
      }
    }

    "OnSpellStart"
    {
      "FireSound"
      {
        "EffectName"                                      "Hero_ChaosKnight.ChaosBolt.Cast"
        "Target"                                          "CASTER"
      }

      "TrackingProjectile"
      {
        "Target"                                          "TARGET"
        "EffectName"                                      "particles/units/heroes/hero_chaos_knight/chaos_knight_chaos_bolt.vpcf"
        "Dodgeable"                                       "1"
        "ProvidesVision"                                  "1"
        "VisionRadius"                                    "250"
        "MoveSpeed"                                       "%glupost_speed"
        "SourceAttachment"                                "DOTA_PROJECTILE_ATTACHMENT_ATTACK_1"
      }
    }

    "OnProjectileHitUnit"
    {
      "DeleteOnHit"                                       "1"

      "FireSound"
      {
        "EffectName"                                      "Hero_ChaosKnight.ChaosBolt.Impact"
        "Target"                                          "TARGET"
      }
      "Random"
      {
        "Chance"                                          "%glupost_chance"
        "PseudoRandom"                                    "DOTA_PSEUDO_RANDOM_SNIPER_HEADSHOT"
        
        "OnSuccess"
        {
          "RunScript"
          {
            "ScriptFile"                                  "heroes/che/che_glupost.lua"
            "Function"                                    "glupost"
            "glupost_particle"                            "particles/units/heroes/hero_chaos_knight/chaos_knight_bolt_msg.vpcf"
          }      
        }
      }
      
    }
  }
  
  //=================================================================================================================
  // Che Monk: Summon Wireless Tramvaj (R) - New Spell, like Kunkka's Ghostship but heals instead of rum and grabs enemies on the way.
  // Author: Darkonius
  // Notes: OK; 11.2.2016;
  // TO_DO: Fix issue with dummy_unit teamnumber (-1);
  //=================================================================================================================
  "che_wireless_tramvaj"
  {
    // General
    //-------------------------------------------------------------------------------------------------------------
    "BaseClass"                                           "ability_datadriven"
    "AbilityType"                                         "DOTA_ABILITY_TYPE_ULTIMATE"
    "AbilityBehavior"                                     "DOTA_ABILITY_BEHAVIOR_DIRECTIONAL | DOTA_ABILITY_BEHAVIOR_POINT | DOTA_ABILITY_BEHAVIOR_IGNORE_BACKSWING"
    "AbilityUnitDamageType"                               "DAMAGE_TYPE_MAGICAL"
    "AbilityUnitTargetTeam"                               "DOTA_UNIT_TARGET_TEAM_BOTH"
    "AbilityUnitTargetType"                               "DOTA_UNIT_TARGET_HERO | DOTA_UNIT_TARGET_CREEP"
    "SpellImmunityType"                                   "SPELL_IMMUNITY_ENEMIES_NO"
    "AbilityTextureName"                                  "che_wireless_tramvaj"
    
    // Casting
    //-------------------------------------------------------------------------------------------------------------
    "AbilityCastRange"                                    "1000"
    "AbilityCastPoint"                                    "0.3"
    
    // Time    
    //-------------------------------------------------------------------------------------------------------------
    "AbilityCooldown"                                     "60.0 50.0 40.0"

    // Cost
    //-------------------------------------------------------------------------------------------------------------
    "AbilityManaCost"                                     "200 300 400"
    "AbilityProcsMagicStick"                              "1"

    // Special
    //-------------------------------------------------------------------------------------------------------------
    "AbilitySpecial"
    {
      "01" // crash delay
      {
        "var_type"                                        "FIELD_FLOAT"
        "tooltip_delay"                                   "3.0"
      }
      "02"
      {
        "var_type"                                        "FIELD_INTEGER"
        "spawn_distance"                                  "1000"
      }
      "03"
      {
        "var_type"                                        "FIELD_INTEGER"
        "ghostship_width"                                 "250"
      }
      "04"
      {
        "var_type"                                        "FIELD_INTEGER"
        "crash_damage"                                    "300 400 500"
      }
      "05"
      {
        "var_type"                                        "FIELD_INTEGER"
        "impact_damage"                                   "100"
      }
      "06"
      {
        "var_type"                                        "FIELD_FLOAT"
        "stun_duration"                                   "1.0 1.5 2.0" // kunkka's ship stun is 1.4 seconds
      }
      "07"
      {
        "var_type"                                        "FIELD_INTEGER"
        "ghostship_speed"                                 "650"
      }
      "08"
      {
        "var_type"                                        "FIELD_INTEGER"
        "crash_distance"                                  "1000"
      }
      "09"
      {
        "var_type"                                        "FIELD_INTEGER"
        "heal_amount"                                     "200 300 400"
      }
      "10"
      {
        "var_type"                                        "FIELD_INTEGER"
        "heal_amount_scepter"                             "300 400 500"
      }
      "11"
      {
        "var_type"                                        "FIELD_INTEGER"
        "ghostship_speed_scepter"                         "1000"
      }
      "12"
      {
        "var_type"                                        "FIELD_INTEGER"
        "spawn_distance_scepter"                          "1500"
      }
      "13"
      {
        "var_type"                                        "FIELD_INTEGER"
        "ghostship_width_scepter"                         "425"
      }
      "14"
      {
        "var_type"                                        "FIELD_INTEGER"
        "crash_damage_scepter"                            "400 500 600"
      }
    }
    
    "precache"
    {
      "soundfile"                                         "soundevents/game_sounds_heroes/game_sounds_kunkka.vsndevts"
      "particle"                                          "particles/units/heroes/hero_kunkka/kunkka_ghostship_marker.vpcf"
      "particle"                                          "particles/units/heroes/hero_kunkka/kunkka_ghost_ship.vpcf"
      "particle"                                          "particles/status_fx/status_effect_rum.vpcf"
    }
    
    "OnSpellStart"
    {
      "FireSound"
      {
        "Target"                                          "CASTER"
        "EffectName"                                      "Ability.Ghostship.bell"
      }
      
      "FireSound"
      {
        "Target"                                          "CASTER"
        "EffectName"                                      "Ability.Ghostship"
      }
      
      "RunScript"
      {
        "ScriptFile"                                      "heroes/che/che_wireless.lua"
        "Function"                                        "GhostShip"
        "Target"                                          "POINT"

        "particle_name"                                   "particles/units/heroes/hero_kunkka/kunkka_ghostship_marker.vpcf"
        "projectile_name"                                 "particles/units/heroes/hero_kunkka/kunkka_ghost_ship.vpcf"
        "crash_sound"                                     "Ability.Ghostship.crash"
      }
    }
    
    "OnProjectileHitUnit"
    {
      "DeleteOnHit"                                       "0"

      "RunScript"
      {
        "ScriptFile"                                      "heroes/che/che_wireless.lua"
        "Function"                                        "OnABoat"

        "modifier_rum"                                    "modifier_wireless_heal"
        "modifier_rum_scepter"                            "modifier_wireless_heal_scepter"
      }
    }
    
    "Modifiers"
    {
      "modifier_wireless_heal"
      {
        "IsBuff"                                          "1"
        "IsHidden"                                        "1"
        
        "Duration"                                        "1.0"
        
        "StatusEffectName"                                "particles/status_fx/status_effect_rum.vpcf"
        "StatusEffectPriority"                            "10"
        
        "OnCreated"
        {
          "Heal"
          {
            "Target"                                      "TARGET"
            "HealAmount"                                  "%heal_amount"
          }
        }
      }

      "modifier_wireless_heal_scepter"
      {
        "IsBuff"                                          "1"
        "IsHidden"                                        "1"
        
        "Duration"                                        "1.0"
        
        "StatusEffectName"                                "particles/status_fx/status_effect_rum.vpcf"
        "StatusEffectPriority"                            "10"
        
        "OnCreated"
        {
          "Heal"
          {
            "Target"                                      "TARGET"
            "HealAmount"                                  "%heal_amount_scepter"
          }
        }
      }
    }
  }
  
  //====================================================================================================
  // Buy and Bribe (Q) - New Spell, Takes control of a target enemy unit for gold. Can be used on Heroes but has a duration.
  // Author: Darkonius
  // Linkens: Blocks
  // Notes: OK; 14.3.2016;
  // TO_DO: Hidden hero should follow the clone;
  //====================================================================================================
  "buy_and_bribe"
  {
    "BaseClass"                                           "ability_datadriven"
    "AbilityTextureName"                                  "buy_and_bribe"
    
    "AbilityBehavior"                                     "DOTA_ABILITY_BEHAVIOR_UNIT_TARGET"
    "AbilityUnitTargetTeam"                               "DOTA_UNIT_TARGET_TEAM_ENEMY"
    "AbilityUnitTargetType"                               "DOTA_UNIT_TARGET_BASIC | DOTA_UNIT_TARGET_HERO"
    "AbilityUnitTargetFlags"                              "DOTA_UNIT_TARGET_FLAG_MAGIC_IMMUNE_ENEMIES"
    "AbilityCastAnimation"                                "ACT_DOTA_CAST_ABILITY_1"
    "SpellImmunityType"                                   "SPELL_IMMUNITY_ENEMIES_NO"
    
    "AbilityCastRange"                                    "800"            
    "AbilityCastPoint"                                    "0.3"
    "AbilityCooldown"                                     "30.0 27.0 25.0 20.0"    // similar to Chen Holy Persuasion
    
    "AbilityManaCost"                                     "100 95 85 75"        // less than Chen Holy Persuasion
    "AbilityProcsMagicStick"                              "1"
    
    "AbilitySpecial"
    {
      "01" // should be same as AbilityCastRange
      {
        "var_type"                                        "FIELD_INTEGER"
        "cast_range"                                      "800"
      }
      "02" // this is not displayed in tooltip of the spell (this duration depends on the duration of the longest delayed damage spell)
      {
        "var_type"                                        "FIELD_FLOAT"
        "clone_duration"                                  "50.0"
      }
      "03"
      {
        "var_type"                                        "FIELD_INTEGER"
        "max_creeps"                                      "1 2 2 3"
      }
      "04" // (needs level 3 of this ability in order to cast it on ancients)
      {
        "var_type"                                        "FIELD_INTEGER"
        "max_ancients"                                    "0 0 1 1"
      }
      "05" // only in tooltip (needs level 4 of this ability in order to cast it on heroes)
      {
        "var_type"                                        "FIELD_INTEGER"
        "max_heroes"                                      "0 0 0 1"
      }
      "06"
      {
        "var_type"                                        "FIELD_INTEGER"
        "gold_cost_lane_creep"                            "50"
      }
      "07"
      {
        "var_type"                                        "FIELD_INTEGER"
        "gold_cost_neutral_creep_base"                    "50"
      }
      "08"
      {
        "var_type"                                        "FIELD_INTEGER"
        "gold_cost_ancient_creep_base"                    "100"
      }
      "09"
      {
        "var_type"                                        "FIELD_INTEGER"
        "gold_cost_hero_base"                             "150"
      }
      "10"
      {
        "var_type"                                        "FIELD_FLOAT"
        "hero_level_multiplier"                           "75.0"
      }
      "11"
      {
        "var_type"                                        "FIELD_INTEGER"
        "hero_streak_multiplier"                          "100"
      }
      "12"
      {
        "var_type"                                        "FIELD_FLOAT"
        "hero_duration"                                   "6.0"
      }
    }
    
    "OnSpellStart"
    {
      "RunScript"
      {
        "ScriptFile"                                      "heroes/buy_and_bribe.lua"
        "Function"                                        "BuyStart"
      }
    }
    
    "Modifiers"
    {
      "modifier_bought_creep" // doesn't need tooltip
      {
        "IsBuff"                                          "1"
        "IsHidden"                                        "1"
        "IsPurgable"                                      "0"
        
        "OnCreated"
        {
          // Buying a lane, neutral, ancient creep or illusion; Changing control, applying modifier_bought_general
          "RunScript"
          {
            "ScriptFile"                                  "heroes/buy_and_bribe.lua"
            "Function"                                    "BuyCreep"
            "Target"                                      "TARGET"
          }
        }
      }
      
      "modifier_bribed_hero" // needs tooltip (this modifier can only see the targeted hero)
      {
        "IsDebuff"                                        "1"
        "IsHidden"                                        "0"
        "IsPurgable"                                      "0"
        
        "OnCreated"
        {
          // Hide the Bribed hero and create a clone; Bribed hero should follow the clone while hidden
          "RunScript"
          {
            "Target"                                      "TARGET"
            "ScriptFile"                                  "heroes/buy_and_bribe.lua"
            "Function"                                    "BribeHero"
          }
        }
        
        "Properties" // properties of the hidden hero
        {
          "MODIFIER_PROPERTY_ABSOLUTE_NO_DAMAGE_PHYSICAL"  "1"
          "MODIFIER_PROPERTY_ABSOLUTE_NO_DAMAGE_MAGICAL"  "1"
          "MODIFIER_PROPERTY_ABSOLUTE_NO_DAMAGE_PURE"     "1"
        }
        
        "States" // states of the hidden hero
        {
          "MODIFIER_STATE_STUNNED"                        "MODIFIER_STATE_VALUE_ENABLED"
          "MODIFIER_STATE_OUT_OF_GAME"                    "MODIFIER_STATE_VALUE_ENABLED"
          "MODIFIER_STATE_INVULNERABLE"                   "MODIFIER_STATE_VALUE_ENABLED"
          "MODIFIER_STATE_ATTACK_IMMUNE"                  "MODIFIER_STATE_VALUE_ENABLED"
          "MODIFIER_STATE_MAGIC_IMMUNE"                   "MODIFIER_STATE_VALUE_ENABLED"
          "MODIFIER_STATE_NO_HEALTH_BAR"                  "MODIFIER_STATE_VALUE_ENABLED"
          "MODIFIER_STATE_UNSELECTABLE"                   "MODIFIER_STATE_VALUE_ENABLED"
          "MODIFIER_STATE_NO_UNIT_COLLISION"              "MODIFIER_STATE_VALUE_ENABLED"
          "MODIFIER_STATE_NOT_ON_MINIMAP"                 "MODIFIER_STATE_VALUE_ENABLED"
          "MODIFIER_STATE_PASSIVES_DISABLED"              "MODIFIER_STATE_VALUE_ENABLED"   // new
          "MODIFIER_STATE_COMMAND_RESTRICTED"             "MODIFIER_STATE_VALUE_ENABLED"  // new
        }
      }
      
      "modifier_bribed_cloned_hero" // needs tooltip (this modifier is visible to everyone on a clone)
      {
        "IsBuff"                                          "1"
        "IsHidden"                                        "0"
        "IsPurgable"                                      "0"
        
        "OnCreated"
        {
          "ApplyModifier"
          {
            "ModifierName"                                "modifier_buy_phased"
            "Target"                                      "TARGET"
          }
        }
        
        "OnDestroy"
        {
          // When clone dies or duration expires; Unhide the original and hide the clone; applying modifier_bribed_removing to the clone
          // If clone dies: Kill credit for killing the original goes to the caster; respawns clone and hides him;
          "RunScript"
          {
            "ScriptFile"                                  "heroes/buy_and_bribe.lua"
            "Function"                                    "BribeHeroEnd"
          }
        }
      }
      
      "modifier_bribed_removing" // doesn't need tooltip, this modifier is hidden, clone is hidden for clone_duration
      {
        "IsBuff"                                          "1"
        "IsHidden"                                        "1"
        "IsPurgable"                                      "0"
        "Duration"                                        "%clone_duration"
        
        "OnDestroy"
        {
          // Remove the clone forever when the duration expires
          "RunScript"
          {
            "Target"                                      "TARGET"
            "ScriptFile"                                  "heroes/buy_and_bribe.lua"
            "Function"                                    "BribeRemoveClone"
          }
        }
        
        "Properties" // properties of the hidden hero
        {
          "MODIFIER_PROPERTY_ABSOLUTE_NO_DAMAGE_PHYSICAL"  "1"
          "MODIFIER_PROPERTY_ABSOLUTE_NO_DAMAGE_MAGICAL"  "1"
          "MODIFIER_PROPERTY_ABSOLUTE_NO_DAMAGE_PURE"     "1"
        }
        
        "States"  // states of the hidden clone hero
        {
          "MODIFIER_STATE_STUNNED"                        "MODIFIER_STATE_VALUE_ENABLED"
          "MODIFIER_STATE_OUT_OF_GAME"                    "MODIFIER_STATE_VALUE_ENABLED"
          "MODIFIER_STATE_INVULNERABLE"                   "MODIFIER_STATE_VALUE_ENABLED"
          "MODIFIER_STATE_ATTACK_IMMUNE"                  "MODIFIER_STATE_VALUE_ENABLED"
          "MODIFIER_STATE_MAGIC_IMMUNE"                   "MODIFIER_STATE_VALUE_ENABLED"
          "MODIFIER_STATE_NO_HEALTH_BAR"                  "MODIFIER_STATE_VALUE_ENABLED"
          "MODIFIER_STATE_UNSELECTABLE"                   "MODIFIER_STATE_VALUE_ENABLED"
          "MODIFIER_STATE_NO_UNIT_COLLISION"              "MODIFIER_STATE_VALUE_ENABLED"
          "MODIFIER_STATE_NOT_ON_MINIMAP"                 "MODIFIER_STATE_VALUE_ENABLED"
          "MODIFIER_STATE_PASSIVES_DISABLED"              "MODIFIER_STATE_VALUE_ENABLED"   // new
          "MODIFIER_STATE_COMMAND_RESTRICTED"             "MODIFIER_STATE_VALUE_ENABLED"  // new
          "MODIFIER_STATE_BLIND"                          "MODIFIER_STATE_VALUE_ENABLED"  // new
        }
      }
      
      "modifier_bought_general" // needs tooltip (this modifier is visible to everyone)
      {
        "IsBuff"                                          "1"
        "IsHidden"                                        "0"
        "IsPurgable"                                      "1"
        
        "OnCreated"
        {
          // This prevents getting stuck.
          "ApplyModifier"
          {
            "ModifierName"                                "modifier_buy_phased"
            "Target"                                      "TARGET"
          }
        }
        
        "OnDestroy"
        {
          // When killed - removes from the table;
          // When purged kill the unit and remove from the table;
          // When removed with RemoveModifier then what? the same as purged?
          "RunScript"
          {
            "ScriptFile"                                  "heroes/buy_and_bribe.lua"
            "Function"                                    "RemoveFromTable"
          }
        }
        
        "States"
        {
          "MODIFIER_STATE_DOMINATED"                      "MODIFIER_STATE_VALUE_ENABLED"
        }
      }
      
      "modifier_buy_phased"  // doesn't need tooltip (hidden no collision modifier)
      {
        "IsHidden"                                        "1"
        "IsPurgable"                                      "0"
        
        "Duration"                                        "1.0"
        
        "States"
        {
          "MODIFIER_STATE_NO_UNIT_COLLISION"              "MODIFIER_STATE_VALUE_ENABLED"
        }
      }
    }
  }
  
  //=================================================================================================================
  // I am the Night (W) - New Spell, invisibility, bonus night vision, bonus intelligence
  // Author: Darkonius
  // Notes: OK; 21.3.2016;
  // TO_DO:
  //=================================================================================================================
  "i_am_batman"
  {
    "BaseClass"                                           "ability_datadriven"
    "AbilityTextureName"                                  "i_am_batman"
    
    "AbilityBehavior"                                     "DOTA_ABILITY_BEHAVIOR_NO_TARGET | DOTA_ABILITY_BEHAVIOR_IMMEDIATE | DOTA_ABILITY_BEHAVIOR_IGNORE_CHANNEL"
    "AbilityUnitDamageType"                               "DAMAGE_TYPE_PHYSICAL"
    "SpellImmunityType"                                   "SPELL_IMMUNITY_ENEMIES_YES"
    
    "AbilityCastPoint"                                    "0"
    "AbilityCooldown"                                     "20.0 19.0 18.0 17.0"
    
    "AbilityManaCost"                                     "75"
    "AbilityProcsMagicStick"                              "1"
    
    "precache"
    {
      "soundfile"                                         "soundevents/game_sounds_heroes/game_sounds_bounty_hunter.vsndevts"
      "particle"                                          "particles/units/heroes/hero_bounty_hunter/bounty_hunter_windwalk.vpcf" 
    }
    
    "AbilitySpecial"
    {
      "01"
      {
        "var_type"                                        "FIELD_FLOAT"
        "duration"                                        "15.0 20.0 25.0 30.0"
      }
      "02"
      {
        "var_type"                                        "FIELD_INTEGER"
        "bonus_damage"                                    "30 60 90 120"
      }
      "03"
      {
        "var_type"                                        "FIELD_INTEGER"
        "bonus_night_vision"                              "1000"
      }
      "04"
      {
        "var_type"                                        "FIELD_INTEGER"
        "bonus_int"                                       "3 6 9 12"
      }
      "05"
      {
        "var_type"                                        "FIELD_INTEGER"
        "passive_bonus_agi"                               "3 6 9 12"
      }
      "06"
      {
        "var_type"                                        "FIELD_INTEGER"
        "passive_bonus_evasion"                           "10 15 20 25"
      }
    }
    
    "OnSpellStart"
    {
      "FireEffect"
      {
        "Target"                                          "CASTER"
        "EffectName"                                      "particles/units/heroes/hero_bounty_hunter/bounty_hunter_windwalk.vpcf"
        "EffectAttachType"                                "attach_origin"
      }
      
      "FireSound"
      {
        "Target"                                          "CASTER"
        "EffectName"                                      "Hero_BountyHunter.WindWalk"
      }
      
      "ApplyModifier" // this modifier only applies transparency, not actual invisibility
      {
        "ModifierName"                                    "modifier_invisible"
        "Target"                                          "CASTER"
        "Duration"                                        "%duration"
      }
      
      "ApplyModifier"
      {
        "ModifierName"                                    "modifier_batman_form"
        "Target"                                          "CASTER"
        "Duration"                                        "%duration"
      }
    }
    
    "Modifiers"
    {
      "modifier_batman_passives" // doesn't need tooltip
      {
        "Passive"                                         "1"
        "IsHidden"                                        "1"
        "IsBuff"                                          "1"
        "IsPurgable"                                      "0"
        
        "AllowIllusionDuplicate"                          "1"
        
        "Properties"
        {
          "MODIFIER_PROPERTY_STATS_AGILITY_BONUS"         "%passive_bonus_agi"
          "MODIFIER_PROPERTY_EVASION_CONSTANT"            "%passive_bonus_evasion"
        }
      }
      
      "modifier_batman_form" // needs tooltip
      {
        "IsHidden"                                        "0"
        "IsBuff"                                          "1"
        "IsPurgable"                                      "1"
        "Duration"                                        "%duration"
        
        "Properties"
        {
          "MODIFIER_PROPERTY_BONUS_NIGHT_VISION"          "%bonus_night_vision"
          "MODIFIER_PROPERTY_STATS_INTELLECT_BONUS"       "%bonus_int"
        }
        
        "States"
        {
          "MODIFIER_STATE_INVISIBLE"                      "MODIFIER_STATE_VALUE_ENABLED"
          "MODIFIER_STATE_NO_UNIT_COLLISION"              "MODIFIER_STATE_VALUE_ENABLED"
          "MODIFIER_STATE_CANNOT_MISS"                    "MODIFIER_STATE_VALUE_ENABLED"
        }
        
        "OnAttackLanded"
        {
          "RemoveModifier"
          {
            "ModifierName"                                "modifier_invisible"
            "Target"                                      "CASTER"
          }
          
          "Damage"
          {
            "Target"
            {
              "Center"                                    "TARGET"
              "Flags"                                     "DOTA_UNIT_TARGET_FLAG_MAGIC_IMMUNE_ENEMIES"
            }
            "Type"                                        "DAMAGE_TYPE_PHYSICAL"
            "Damage"                                      "%bonus_damage"
          }
          
          "RemoveModifier"
          {
            "ModifierName"                                "modifier_batman_form"
            "Target"                                      "CASTER"
          }
          
          "FireEffect"
          {
            "EffectName"                                  "particles/msg_fx/msg_crit.vpcf"
            "EffectAttachType"                            "follow_overhead"
            "Target"
            {
              "Center"                                    "TARGET"
              "Flags"                                     "DOTA_UNIT_TARGET_FLAG_MAGIC_IMMUNE_ENEMIES"
            }
            "ControlPoints"
            {
              "01"                                        "9 %bonus_damage 4"    //pre number post
              "02"                                        "1 4 0"          //lifetime digits
              "03"                                        "255 0 0"        //color
            }
          }
        }
        
        "OnAbilityExecuted"
        {
          "RemoveModifier"
          {
            "ModifierName"                                "modifier_invisible"
            "Target"                                      "CASTER"
          }
          
          "RemoveModifier"
          {
            "ModifierName"                                "modifier_batman_form"
            "Target"                                      "CASTER"
          }
        }
      }
    }
  }
  
  //====================================================================================================
  // I am Iron Man (E) - New Spell, becomes ranged, has free pathing and bonus armor 
  // Author: Darkonius
  // Notes: OK; 19.4.2016; Illusions benefit from this spell.
  // TO_DO: Fix flying movement visual;
  //====================================================================================================
  "i_am_iron_man"
  {
    "BaseClass"                                           "ability_datadriven"
    "AbilityTextureName"                                  "i_am_iron_man"
    
    "AbilityBehavior"                                     "DOTA_ABILITY_BEHAVIOR_NO_TARGET | DOTA_ABILITY_BEHAVIOR_IMMEDIATE | DOTA_ABILITY_BEHAVIOR_IGNORE_CHANNEL"
    
    "AbilityCastPoint"                                    "0.0"
    "AbilityCastAnimation"                                "ACT_DOTA_CAST_ABILITY_3"
    
    "AbilityCooldown"                                     "50 40 30 20"    // like Winter Wyvern Arctic Burn, longer than Spectre Spectral Dagger, longer than Sven War Cry
    
    "AbilityManaCost"                                     "120"        // like Winter Wyvern Arctic Burn level 1  
    "AbilityProcsMagicStick"                              "1"
    
    "AbilitySpecial"
    {
      "01"
      {
        "var_type"                                        "FIELD_FLOAT"
        "duration"                                        "6.0 7.0 8.0 9.0"
      }
      "02"
      {
        "var_type"                                        "FIELD_INTEGER"
        "bonus_armor"                                     "2 5 8 11"
      }
      "03" // only here; 128 + 472 = 600
      {
        "var_type"                                        "FIELD_INTEGER"
        "bonus_range"                                     "472"
      }
      "04" // only in tooltip; 128 + 472 = 600
      {
        "var_type"                                        "FIELD_INTEGER"
        "range_tooltip"                                   "600"
      }
      "05" // only here; like Winter Wyvern Arctic Burn, if you change this you need to change the value inside the tooltip note
      {
        "var_type"                                        "FIELD_INTEGER"
        "tree_destroy_radius"                             "250"
      }
    }
    
    "precache" // needs precache only if base hero is not sven
    {
      "soundfile"                                         "soundevents/game_sounds_heroes/game_sounds_sven.vsndevts"
      "particle"                                          "particles/units/heroes/hero_sven/sven_spell_warcry.vpcf"
      "particle"                                          "particles/units/heroes/hero_sven/sven_warcry_buff.vpcf"
      "particle"                                          "particles/units/heroes/hero_sven/sven_spell_storm_bolt.vpcf"
    }
    
    "OnSpellStart"
    {
      "FireSound"
      {
        "EffectName"                                      "Hero_Sven.WarCry"
        "Target"                                          "CASTER"
      }
      
      "FireEffect"
      {
        "EffectName"                                      "particles/units/heroes/hero_sven/sven_spell_warcry.vpcf"
        "EffectAttachType"                                "follow_origin"
        "Target"                                          "CASTER"
      }
      
      "ApplyModifier"
      {
        "ModifierName"                                    "modifier_iron_man_form"
        "Target"                                          "CASTER"
        "Duration"                                        "%duration"
      }
      
      "ApplyModifier"
      {
        "ModifierName"                                    "modifier_iron_man_form_aura"
        "Target"                                          "CASTER"
        "Duration"                                        "%duration"
      }
    }
    
    "Modifiers"
    {
      "modifier_iron_man_form"  // needs tooltip
      {
        "IsHidden"                                        "0"
        "IsBuff"                                          "1"
        "IsPurgable"                                      "0"
        
        "AllowIllusionDuplicate"                          "0"
        
        "EffectName"                                      "particles/units/heroes/hero_sven/sven_warcry_buff.vpcf"
        "EffectAttachType"                                "follow_origin"
        
        "Properties"
        {
          "MODIFIER_PROPERTY_ATTACK_RANGE_BONUS"          "%bonus_range"
          "MODIFIER_PROPERTY_PHYSICAL_ARMOR_BONUS"        "%bonus_armor"      
        }
        
        "States"
        {
          "MODIFIER_STATE_FLYING"                         "MODIFIER_STATE_VALUE_ENABLED"  // free pathing
          "MODIFIER_STATE_NO_UNIT_COLLISION"              "MODIFIER_STATE_VALUE_ENABLED"  // no unit collision
        }
        
        "OnCreated"
        {
          "RunScript"
          {
            "ScriptFile"                                  "heroes/iron_man.lua"
            "Function"                                    "ChangeAttack"
            "projectile_model"                            "particles/units/heroes/hero_sven/sven_spell_storm_bolt.vpcf"
          }
        }
        
        "OnDestroy"
        {
          "DestroyTrees"
          {
            "Target"                                      "TARGET"
            "Radius"                                      "%tree_destroy_radius"
          }
          
          "RunScript"
          {
            "ScriptFile"                                  "heroes/iron_man.lua"
            "Function"                                    "RevertAttack"
          }
        }
      }
      
      "modifier_iron_man_form_aura" // doesn't need tooltip
      {
        "IsHidden"                                        "1"
        "IsPurgable"                                      "0"
        
        "AllowIllusionDuplicate"                          "0"
        
        "OnCreated"
        {
          "RunScript"
          {
            "ScriptFile"                                  "heroes/iron_man.lua"
            "Function"                                    "ChangeIllusionAttack"
          }
        }
        
        "ThinkInterval"                                   "0.2"
        
        "OnIntervalThink"
        {
          "RunScript"
          {
            "ScriptFile"                                  "heroes/iron_man.lua"
            "Function"                                    "ChangeIllusionAttack"
          }
        }
      }
      
      "modifier_iron_man_form_illusion" // doesn't need tooltip
      {
        "IsHidden"                                        "1"
        "IsBuff"                                          "1"
        "IsPurgable"                                      "0"
        
        "EffectName"                                      "particles/units/heroes/hero_sven/sven_warcry_buff.vpcf"
        "EffectAttachType"                                "follow_origin"
        
        "Properties"
        {
          "MODIFIER_PROPERTY_ATTACK_RANGE_BONUS"          "%bonus_range"
        }
        
        "States"
        {
          "MODIFIER_STATE_FLYING"                         "MODIFIER_STATE_VALUE_ENABLED"  // free pathing
          "MODIFIER_STATE_NO_UNIT_COLLISION"              "MODIFIER_STATE_VALUE_ENABLED"  // no unit collision
        }
        
        "OnCreated"
        {
          "RunScript"
          {
            "ScriptFile"                                  "heroes/iron_man.lua"
            "Function"                                    "ChangeAttack"
            "projectile_model"                            "particles/units/heroes/hero_sven/sven_spell_storm_bolt.vpcf"
          }
        }
      }
    }
  }
  
  //====================================================================================================
  // Force Choke (T) - New Spell, telekinesis + damage + miss chance
  // Author: Darkonius
  // Notes: OK; 12.2.2016;
  // TO_DO: Fix the visuals of telekinesis part to be more smooth, not critical
  //====================================================================================================
  "force_choke"
  {
    "BaseClass"                                           "ability_datadriven"
    "AbilityTextureName"                                  "rubick_telekinesis"
    "AbilityBehavior"                                     "DOTA_ABILITY_BEHAVIOR_UNIT_TARGET"
    "AbilityUnitTargetTeam"                               "DOTA_UNIT_TARGET_TEAM_ENEMY"
    "AbilityUnitTargetType"                               "DOTA_UNIT_TARGET_HERO | DOTA_UNIT_TARGET_BASIC"
    "AbilityUnitDamageType"                               "DAMAGE_TYPE_MAGICAL"
    "SpellImmunityType"                                   "SPELL_IMMUNITY_ENEMIES_NO"

    // Casting
    //-------------------------------------------------------------------------------------------------------------
    "AbilityCastPoint"                                    "0.3"
    "AbilityCastAnimation"                                "ACT_DOTA_CAST_ABILITY_1"

    // Time    
    //-------------------------------------------------------------------------------------------------------------
    "AbilityCooldown"                                     "22"

    // Cost
    //-------------------------------------------------------------------------------------------------------------
    "AbilityManaCost"                                     "120"
    "AbilityProcsMagicStick"                              "1"
    
    // Cast Range
    //-------------------------------------------------------------------------------------------------------------
    "AbilityCastRange"                                    "550 575 600 625"

    "precache"
    {
      "soundfile"                                         "soundevents/game_sounds_heroes/game_sounds_rubick.vsndevts"
      "particle"                                          "particles/units/heroes/hero_rubick/rubick_telekinesis.vpcf"
      "particle"                                          "particles/units/heroes/hero_rubick/rubick_telekinesis_land.vpcf"
    }
    
    // Special
    //-------------------------------------------------------------------------------------------------------------
    "AbilitySpecial"
    {
      "01"
      {
        "var_type"                                        "FIELD_FLOAT"
        "duration"                                        "1.5 1.75 2.0 2.25"
      }
      "02" // only in here, not in tooltip; thinkinterval is 0.1
      {
        "var_type"                                        "FIELD_INTEGER"
        "damage_per_interval"                             "7 9 10 12"
      }
      "03"
      {
        "var_type"                                        "FIELD_INTEGER"
        "damage"                                          "100 150 200 250"
      }
      "04"
      {
        "var_type"                                        "FIELD_INTEGER"
        "miss_chance"                                     "35 45 55 65"
      }
      "05"
      {
        "var_type"                                        "FIELD_INTEGER"
        "radius"                                          "325"
      }
      "06"
      {
        "var_type"                                        "FIELD_FLOAT"
        "miss_duration"                                   "6.0"
      }
      "07" // only in tooltip; should be same as AbilityCastRange
      {
        "var_type"                                        "FIELD_INTEGER"
        "cast_range"                                      "550 575 600 625"
      }
    }
    
    "OnSpellStart"
    {
      "RunScript"
      {
        "ScriptFile"                                      "heroes/force_choke.lua"
        "Function"                                        "ChokeStart"
      }
    }
    
    "Modifiers"
    {
      "modifier_force_choked" // needs tooltip
      {
        "IsHidden"                                        "0"
        "IsDebuff"                                        "1"
        "IsStunDebuff"                                    "1"
        "IsPurgable"                                      "1"
        
        "Duration"                                        "%duration"
        
        "OverrideAnimation"                               "ACT_DOTA_FLAIL"
        
        "States"
        {
          "MODIFIER_STATE_STUNNED"                        "MODIFIER_STATE_VALUE_ENABLED"
          "MODIFIER_STATE_NO_UNIT_COLLISION"              "MODIFIER_STATE_VALUE_ENABLED"
          "MODIFIER_STATE_FLYING"                         "MODIFIER_STATE_VALUE_ENABLED"
        }
        
        "OnCreated"
        {
          "RunScript"
          {
            "ScriptFile"                                  "heroes/force_choke.lua"
            "Function"                                    "ChokeMain"
          }
          
          "Damage"
          {
            "Target"                                      "TARGET"
            "Type"                                        "DAMAGE_TYPE_MAGICAL"
            "Damage"                                      "%damage_per_interval"
          }
        }
        "ThinkInterval"                                   "0.1"
        "OnIntervalThink"
        {
          "Damage"
          {
            "Target"                                      "TARGET"
            "Type"                                        "DAMAGE_TYPE_MAGICAL"
            "Damage"                                      "%damage_per_interval"
          }
        }
        "OnDestroy"
        {
          "FireEffect"
          {
            "EffectName"                                  "particles/units/heroes/hero_rubick/rubick_telekinesis_land.vpcf"
            "EffectAttachType"                            "follow_origin"
            "EffectRadius"                                "%radius"
            "Target"                                      "TARGET"
            "ControlPoints"
            {
              "01"                                        "%radius 0 %radius"
            }
          }
          
          "RunScript"
          {
            "ScriptFile"                                  "heroes/force_choke.lua"
            "Function"                                    "ChokeEnd"
          }
          
          "DestroyTrees"
          {
            "Target"                                      "TARGET"
            "Radius"                                      "%radius"
          }
          
          "ApplyModifier"
          {
            "Target"
            {
              "Center"                                    "TARGET"
              "Radius"                                    "%radius"
              "Teams"                                     "DOTA_UNIT_TARGET_TEAM_ENEMY"
              "Types"                                     "DOTA_UNIT_TARGET_HERO | DOTA_UNIT_TARGET_BASIC"
            }
            "ModifierName"                                "modifier_force_blind"
            "Duration"                                    "%miss_duration"
          }
        }
      }
      "modifier_force_blind" // needs tooltip
      {
        "IsHidden"                                        "0"
        "IsDebuff"                                        "1"
        "IsPurgable"                                      "1"
        
        "Properties"
        {
          "MODIFIER_PROPERTY_MISS_PERCENTAGE"             "%miss_chance"
        }
      }
    }
  }
  
  //====================================================================================================
  // Dead Pool Madness (F) - New Spell, Ursa Enrage + bonus dmg + bonus attack speed + bonus hp regen + he is uncontrollable 
  // Author: Darkonius
  // Notes: OK; 13.2.2016;
  // TO_DO: 
  //====================================================================================================
  "deadpool_madness"
  {
    "BaseClass"                                           "ability_datadriven"
    "AbilityTextureName"                                  "sven_gods_strength"
    "AbilityBehavior"                                     "DOTA_ABILITY_BEHAVIOR_NO_TARGET | DOTA_ABILITY_BEHAVIOR_IGNORE_BACKSWING"
    "MaxLevel"                                            "1"
    "RequiredLevel"                                       "6"
    
    // Precache
    //-------------------------------------------------------------------------------------------------------------
    "precache"
    {
      "soundfile"                                         "soundevents/game_sounds_heroes/game_sounds_sven.vsndevts"
      "particle"                                          "particles/units/heroes/hero_sven/sven_spell_gods_strength.vpcf"
      "particle"                                          "particles/status_fx/status_effect_gods_strength.vpcf"
    }
    
    // Casting
    //-------------------------------------------------------------------------------------------------------------
    "AbilityCastPoint"                                    "0.3"
    "AbilityCastAnimation"                                "ACT_DOTA_CAST_ABILITY_4"

    // Time    
    //-------------------------------------------------------------------------------------------------------------
    "AbilityCooldown"                                     "50.0"        // like duel
    
    // Cost
    //-------------------------------------------------------------------------------------------------------------
    "AbilityManaCost"                                     "75"        // like duel
    "AbilityProcsMagicStick"                              "1"

    // Special
    //-------------------------------------------------------------------------------------------------------------
    "AbilitySpecial"
    {
      "01"
      {
        "var_type"                                        "FIELD_INTEGER"
        "damage_reduction"                                "-80"          // like Ursa Enrage
      }
      "02"
      {
        "var_type"                                        "FIELD_INTEGER"
        "attack_speed"                                    "300"          // better than Mask of Madness
      }
      "03"
      {
        "var_type"                                        "FIELD_INTEGER"
        "hp_regen"                                        "50"          // like Alchemist's Chemical Rage level 1
      }
      "04"
      {
        "var_type"                                        "FIELD_FLOAT"
        "duration"                                        "5.0"          // caster is not controllable for the duration
      }
    }

    "OnSpellStart"
    {
      "FireSound"
      {
        "EffectName"                                      "Hero_Sven.GodsStrength"
        "Target"                                          "CASTER"
      }

      "FireEffect"
      {
        "EffectName"                                      "particles/units/heroes/hero_sven/sven_spell_gods_strength.vpcf"
        "EffectAttachType"                                "follow_origin"
        "Target"                                          "CASTER"
      }

      "ApplyModifier"
      {
        "ModifierName"                                    "modifier_deadpool_madness"
        "Target"                                          "CASTER"
      }
    }

    "Modifiers"
    {
      "modifier_deadpool_madness" // needs tooltip
      {
        "IsHidden"                                        "0"
        "IsBuff"                                          "1"
        "IsPurgable"                                      "0"
        "Duration"                                        "%duration"

        "StatusEffectName"                                "particles/status_fx/status_effect_gods_strength.vpcf"
        "StatusEffectPriority"                            "10"

        "ThinkInterval"                                   "0.03"
        "OnIntervalThink"
        {
          "RunScript"
          {
            "ScriptFile"                                  "heroes/deadpool_madness.lua"
            "Function"                                    "Madness"
          }
        }
        
        "OnDestroy"
        {
          "RunScript"
          {
            "ScriptFile"                                  "heroes/deadpool_madness.lua"
            "Function"                                    "MadnessEnd"
          }
        }
        
        "Properties"
        {
          "MODIFIER_PROPERTY_ATTACKSPEED_BONUS_CONSTANT"  "%attack_speed"
          "MODIFIER_PROPERTY_HEALTH_REGEN_CONSTANT"       "%hp_regen"
          "MODIFIER_PROPERTY_INCOMING_DAMAGE_PERCENTAGE"  "%damage_reduction"
          "MODIFIER_PROPERTY_DISABLE_AUTOATTACK"          "0"
        }
        
        "States"
        {
          "MODIFIER_STATE_EVADE_DISABLED"                 "MODIFIER_STATE_VALUE_ENABLED"
        }
      }
      
      "modifier_madness_deniable"  // doesn't need tooltip
      {
        "IsHidden"                                        "1"
        "IsDebuff"                                        "1"
        "IsPurgable"                                      "0"
        
        "States"
        {
          "MODIFIER_STATE_SPECIALLY_DENIABLE"             "MODIFIER_STATE_VALUE_ENABLED"
        }
      }
      
      "modifier_madness_revealed"  // doesn't need tooltip
      {
        "IsHidden"                                        "1"
        "IsDebuff"                                        "1"
        "IsPurgable"                                      "0"
        
        "OnCreated"
        {
          "RunScript"
          {
            "ScriptFile"                                  "heroes/deadpool_madness.lua"
            "Function"                                    "ProvideVision"
          }
        }
        
        "ThinkInterval"                                   "0.5"
        "OnIntervalThink"
        {
          "RunScript"
          {
            "ScriptFile"                                  "heroes/deadpool_madness.lua"
            "Function"                                    "ProvideVision"
          }
        }
        //"States"
        //{
          //"MODIFIER_STATE_PROVIDES_VISION"    "MODIFIER_STATE_VALUE_ENABLED"
        //}
      }
      
      "modifier_madness_restricted" // doesn't need tooltip
      {
        "IsHidden"                                        "1"
        "IsDebuff"                                        "1"
        "IsPurgable"                                      "0"
        
        "States"
        {
          "MODIFIER_STATE_COMMAND_RESTRICTED"             "MODIFIER_STATE_VALUE_ENABLED"
        }
      }
    }
  }
}
